# é€²åº¦æª¢æŸ¥è…³æœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“Š check_diversity_progress.sh

é€™å€‹è…³æœ¬å¯ä»¥å¿«é€Ÿæª¢æŸ¥æ­£åœ¨é‹è¡Œçš„å¤šæ¨£æ€§åˆ†æé€²åº¦ã€‚

### ğŸš€ å¿«é€Ÿä½¿ç”¨

```bash
# å–®æ¬¡æª¢æŸ¥
bash scripts/utils/check_diversity_progress.sh

# å¯¦æ™‚ç›£æ§ï¼ˆæ¯ 30 ç§’æ›´æ–°ï¼‰
watch -n 30 bash scripts/utils/check_diversity_progress.sh

# å¯¦æ™‚ç›£æ§ï¼ˆæ¯ 10 ç§’æ›´æ–°ï¼‰
watch -n 10 bash scripts/utils/check_diversity_progress.sh
```

### ğŸ“‹ é¡¯ç¤ºå…§å®¹

è…³æœ¬æœƒé¡¯ç¤ºï¼š

1. **é€²ç¨‹ä¿¡æ¯**
   - PIDï¼ˆé€²ç¨‹ IDï¼‰
   - é‹è¡Œæ™‚é–“
   - å·²é‹è¡Œç§’æ•¸å’Œåˆ†é˜æ•¸

2. **é€²åº¦çµ±è¨ˆ**
   - é ä¼°å®Œæˆä¸–ä»£æ•¸
   - é ä¼°é€²åº¦ç™¾åˆ†æ¯”
   - å¯è¦–åŒ–é€²åº¦æ¢

3. **æ™‚é–“é ä¼°**
   - ç•¶å‰æ™‚é–“
   - å‰©é¤˜æ™‚é–“
   - é è¨ˆå®Œæˆæ™‚é–“
   - ç¸½é ä¼°æ™‚é–“

4. **ç³»çµ±ç‹€æ…‹**
   - æ´»èº Worker æ•¸é‡
   - æ¯å€‹ Worker çš„ CPU ä½¿ç”¨ç‡
   - ç³»çµ±ç¸½ CPU ä½¿ç”¨ç‡

5. **è¼¸å‡ºç‹€æ…‹**
   - æª¢æŸ¥è¼¸å‡ºæ–‡ä»¶æ˜¯å¦å·²ç”Ÿæˆ
   - å¦‚æœå·²ç”Ÿæˆï¼Œé¡¯ç¤ºæ–‡ä»¶å¤§å°

### ğŸ“ ç¯„ä¾‹è¼¸å‡º

```
============================================================
ğŸ“Š å¤šæ¨£æ€§åˆ†æé€²åº¦å ±å‘Š
============================================================

ğŸ” é€²ç¨‹ä¿¡æ¯
  PID: 3183
  é‹è¡Œæ™‚é–“: 52:27
  å·²é‹è¡Œ: 3147 ç§’ (52 åˆ†é˜)

ğŸ“ˆ é€²åº¦çµ±è¨ˆ
  é ä¼°å®Œæˆä¸–ä»£: ~15 / 25
  é ä¼°é€²åº¦: 61%
  é€²åº¦æ¢: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 61%

â° æ™‚é–“é ä¼°
  ç•¶å‰æ™‚é–“: 17:40:04
  å‰©é¤˜æ™‚é–“: ~32 åˆ†é˜
  é è¨ˆå®Œæˆ: 18:13:02
  ç¸½é ä¼°æ™‚é–“: ~85 åˆ†é˜

ğŸ’» ç³»çµ±ç‹€æ…‹
  æ´»èº Worker: 3
  Worker CPU ä½¿ç”¨ç‡:
    PID 3184: 0.0%
    PID 30231: 74.8%
    PID 30232: 75.4%
  ç³»çµ± CPU ä½¿ç”¨: 38.70%

ğŸ“ è¼¸å‡ºç‹€æ…‹
  â³ è¼¸å‡ºæ–‡ä»¶å°šæœªç”Ÿæˆï¼ˆå®Œæˆå¾Œæ‰æœƒå¯«å…¥ï¼‰

============================================================
ğŸ’¡ æç¤º: åˆ†æé€²è¡Œä¸­ï¼Œé è¨ˆé‚„éœ€è¦ 32 åˆ†é˜
```

### âš™ï¸ é…ç½®åƒæ•¸

è…³æœ¬å…§éƒ¨æœ‰ä»¥ä¸‹é è¨­åƒæ•¸ï¼ˆä½æ–¼ç¬¬ 63-66 è¡Œï¼‰ï¼š

```bash
COOLDOWN=5              # æ¯ä¸–ä»£å†·å»æ™‚é–“ï¼ˆç§’ï¼‰
GEN_COMPUTE_TIME=200    # æ¯ä¸–ä»£è¨ˆç®—æ™‚é–“ï¼ˆç§’ï¼‰
TOTAL_GENS=25           # ç¸½ä¸–ä»£æ•¸
```

å¦‚æœæ‚¨çš„å¯¦é©—é…ç½®ä¸åŒï¼Œè«‹ä¿®æ”¹é€™äº›åƒæ•¸ã€‚

### ğŸ”§ æ•…éšœæ’é™¤

#### å•é¡Œ 1: æ‰¾ä¸åˆ°é€²ç¨‹
```
âŒ æ²’æœ‰æ‰¾åˆ°æ­£åœ¨é‹è¡Œçš„å¤šæ¨£æ€§åˆ†æé€²ç¨‹
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- æª¢æŸ¥åˆ†ææ˜¯å¦å·²å®Œæˆ
- ç¢ºèªé€²ç¨‹åç¨±æ˜¯å¦ç‚º `compute_diversity_metrics.py`
- ä½¿ç”¨ `ps aux | grep compute_diversity` æ‰‹å‹•æŸ¥æ‰¾

#### å•é¡Œ 2: é€²åº¦é¡¯ç¤ºä¸æº–ç¢º

**åŸå› **ï¼š
- é è¨­åƒæ•¸èˆ‡å¯¦éš›é…ç½®ä¸ç¬¦
- æŸäº›ä¸–ä»£è¨ˆç®—æ™‚é–“å·®ç•°è¼ƒå¤§

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- èª¿æ•´è…³æœ¬ä¸­çš„ `GEN_COMPUTE_TIME` åƒæ•¸
- é€²åº¦åƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›æ™‚é–“å¯èƒ½æœ‰åå·®

#### å•é¡Œ 3: watch å‘½ä»¤ä¸å¯ç”¨

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£ watch
brew install watch

# æˆ–ä½¿ç”¨å¾ªç’°æ›¿ä»£
while true; do 
    clear
    bash scripts/utils/check_diversity_progress.sh
    sleep 30
done
```

### ğŸ’¡ ä½¿ç”¨æŠ€å·§

#### 1. åœ¨å¾Œå°é‹è¡Œä¸¦è¨˜éŒ„æ—¥èªŒ
```bash
# æ¯åˆ†é˜è¨˜éŒ„ä¸€æ¬¡é€²åº¦
while true; do
    echo "=== $(date) ===" >> progress.log
    bash scripts/utils/check_diversity_progress.sh >> progress.log
    sleep 60
done &
```

#### 2. è¨­ç½®å®Œæˆæé†’
```bash
# ç•¶é€²åº¦é”åˆ° 95% æ™‚ç™¼é€é€šçŸ¥ï¼ˆmacOSï¼‰
while true; do
    PROGRESS=$(bash scripts/utils/check_diversity_progress.sh | grep "é ä¼°é€²åº¦" | awk '{print $3}' | sed 's/%//')
    if [ "$PROGRESS" -ge 95 ]; then
        osascript -e 'display notification "å¤šæ¨£æ€§åˆ†æå³å°‡å®Œæˆï¼" with title "é€²åº¦æé†’"'
        break
    fi
    sleep 60
done
```

#### 3. ç›£æ§å¤šå€‹é€²ç¨‹
```bash
# å¦‚æœåŒæ™‚é‹è¡Œå¤šå€‹åˆ†æ
ps aux | grep compute_diversity_metrics.py | grep -v grep | awk '{print $2}' | while read pid; do
    echo "=== PID: $pid ==="
    # éœ€è¦ä¿®æ”¹è…³æœ¬æ”¯æŒå‚³å…¥ PID
done
```

### ğŸ“š ç›¸é—œè…³æœ¬

- `check_cpu_affinity.sh` - æª¢æŸ¥ CPU æ ¸å¿ƒä½¿ç”¨æƒ…æ³
- `compute_diversity_metrics.py` - ä¸»è¦çš„å¤šæ¨£æ€§è¨ˆç®—è…³æœ¬

### ğŸ¯ å¿«é€Ÿåƒè€ƒ

```bash
# æª¢æŸ¥ä¸€æ¬¡
bash scripts/utils/check_diversity_progress.sh

# æŒçºŒç›£æ§
watch -n 30 bash scripts/utils/check_diversity_progress.sh

# æª¢æŸ¥é€²ç¨‹æ˜¯å¦å­˜åœ¨
ps aux | grep compute_diversity_metrics.py | grep -v grep

# åœæ­¢åˆ†æ
kill <PID>
```
