# å‹•æ…‹ Niche æ•¸é‡é¸æ“‡å¯¦é©—å ±å‘Š

**å¯¦é©—æ—¥æœŸ**: 2025-10-17  
**å¯¦é©—ç›®çš„**: æ¸¬è©¦ä½¿ç”¨ Silhouette Score å‹•æ…‹é¸æ“‡æœ€ä½³ niche æ•¸é‡çš„å¯è¡Œæ€§

---

## ğŸ“‹ å¯¦é©—è¨­è¨ˆ

### å¯¦é©—åƒæ•¸
- **è³‡æ–™ä¾†æº**: `portfolio_exp_sharpe_20251017_122243/generations`
- **æ¸¬è©¦ Generations**: 6 å€‹ (generation_001 åˆ° generation_006_final)
- **K å€¼ç¯„åœ**: 2-8 (æ ¹æ“š population å¤§å°å‹•æ…‹èª¿æ•´)
- **èšé¡æ¼”ç®—æ³•**: K-means
- **è©•ä¼°æŒ‡æ¨™**: Silhouette Score

### å¯¦é©—æµç¨‹
1. è¼‰å…¥æ¯å€‹ generation çš„ population
2. è¨ˆç®—ç›¸ä¼¼åº¦çŸ©é™£ï¼ˆåŸºæ–¼ Tree Edit Distanceï¼‰
3. å°æ¯å€‹ k å€¼ï¼ˆ2-8ï¼‰é€²è¡Œèšé¡
4. è¨ˆç®—æ¯å€‹ k å€¼çš„ Silhouette Score
5. é¸æ“‡ Silhouette Score æœ€é«˜çš„ k å€¼ä½œç‚ºæœ€ä½³ niche æ•¸é‡
6. è¨˜éŒ„è¨ˆç®—æ™‚é–“

---

## ğŸ“Š å¯¦é©—çµæœæ‘˜è¦

| Generation | Population Size | Best K | Best Silhouette | Similarity Time (s) | K Testing Time (s) | Total Time (s) |
|------------|----------------|--------|-----------------|---------------------|-------------------|----------------|
| generation_001 | 5 | 2 | 0.0000 | 0.01 | 0.24 | 0.25 |
| generation_002 | 5 | 2 | 0.0000 | 0.00 | 0.02 | 0.02 |
| generation_003 | 5 | 2 | 0.0000 | 0.00 | 0.02 | 0.02 |
| generation_004 | 5 | 2 | 0.0000 | 0.00 | 0.01 | 0.01 |
| generation_005 | 5 | 2 | 0.0000 | 0.00 | 0.01 | 0.01 |
| generation_006_final | 7 | 2 | 0.0000 | 0.00 | 0.02 | 0.02 |

---

## ğŸ” é—œéµç™¼ç¾

### 1. Population å¤šæ¨£æ€§æ¥µä½
**è§€å¯Ÿ**:
- æ‰€æœ‰ generation çš„å¹³å‡ç›¸ä¼¼åº¦éƒ½æ˜¯ **1.0000**ï¼ˆå®Œå…¨ç›¸åŒï¼‰
- å¤šæ¨£æ€§åˆ†æ•¸éƒ½æ˜¯ **0.0000**ï¼ˆæ²’æœ‰å¤šæ¨£æ€§ï¼‰
- æ‰€æœ‰ k å€¼çš„ Silhouette Score éƒ½æ˜¯ **0.0000**

**åŸå› åˆ†æ**:
é€™äº› generation æª”æ¡ˆä¸­çš„ population éå¸¸å°ï¼ˆ5-7 å€‹å€‹é«”ï¼‰ï¼Œä¸”æ‰€æœ‰å€‹é«”å¯èƒ½éƒ½æ˜¯ç›¸åŒçš„æˆ–éå¸¸ç›¸ä¼¼çš„ã€‚é€™è¡¨ç¤ºï¼š
1. é€™äº›å¯èƒ½æ˜¯å¯¦é©—æ—©æœŸçš„ checkpoint
2. Population å°šæœªå……åˆ†æ¼”åŒ–
3. æˆ–è€…é€™æ˜¯ä¸€å€‹æ¸¬è©¦å¯¦é©—çš„å°è¦æ¨¡è³‡æ–™

### 2. è¨ˆç®—æ™‚é–“åˆ†æ

#### ç›¸ä¼¼åº¦çŸ©é™£è¨ˆç®—æ™‚é–“
- **Generation 1**: 0.01s (é¦–æ¬¡è¨ˆç®—è¼ƒæ…¢ï¼ŒåŒ…å«åˆå§‹åŒ–)
- **Generation 2-6**: < 0.01s (éå¸¸å¿«)
- **å¹³å‡**: ~0.002s

#### K å€¼æ¸¬è©¦æ™‚é–“
- **Generation 1**: 0.24s (é¦–æ¬¡æ¸¬è©¦è¼ƒæ…¢)
- **Generation 2-6**: 0.01-0.02s
- **å¹³å‡**: ~0.05s

#### ç¸½æ™‚é–“
- **æœ€é•·**: 0.25s (Generation 1)
- **æœ€çŸ­**: 0.01s (Generation 4, 5)
- **å¹³å‡**: ~0.05s

**çµè«–**: å°æ–¼å°è¦æ¨¡ population (5-7 å€‹é«”)ï¼Œæ•´å€‹å‹•æ…‹é¸æ“‡æµç¨‹éå¸¸å¿«é€Ÿï¼ˆ< 0.3ç§’ï¼‰ã€‚

### 3. K å€¼é¸æ“‡çµæœ
æ‰€æœ‰ generation éƒ½é¸æ“‡äº† **k=2** ä½œç‚ºæœ€ä½³å€¼ï¼Œä½†é€™å€‹çµæœæ²’æœ‰å¯¦éš›æ„ç¾©ï¼Œå› ç‚ºï¼š
- Silhouette Score éƒ½æ˜¯ 0.0
- æ‰€æœ‰å€‹é«”éƒ½è¢«åˆ†åˆ°åŒä¸€å€‹ cluster
- ç„¡æ³•çœŸæ­£å€åˆ†ä¸åŒçš„ niches

---

## âš ï¸ å¯¦é©—é™åˆ¶

### 1. è³‡æ–™å•é¡Œ
- **Population å¤ªå°**: 5-7 å€‹å€‹é«”ç„¡æ³•é€²è¡Œæœ‰æ•ˆçš„èšé¡åˆ†æ
- **å¤šæ¨£æ€§ç‚ºé›¶**: æ‰€æœ‰å€‹é«”å®Œå…¨ç›¸åŒï¼Œç„¡æ³•æ¸¬è©¦å‹•æ…‹é¸æ“‡çš„æ•ˆæœ
- **ä¸å…·ä»£è¡¨æ€§**: é€™äº›è³‡æ–™ä¸èƒ½ä»£è¡¨çœŸå¯¦çš„æ¼”åŒ–éç¨‹

### 2. å»ºè­°çš„æ”¹é€²
ç‚ºäº†çœŸæ­£æ¸¬è©¦å‹•æ…‹ niche é¸æ“‡çš„æ•ˆæœï¼Œéœ€è¦ï¼š
1. **ä½¿ç”¨æ›´å¤§çš„ population**: è‡³å°‘ 100-500 å€‹å€‹é«”
2. **ä½¿ç”¨æ¼”åŒ–ä¸­æœŸçš„è³‡æ–™**: Generation 10-30ï¼Œæ­¤æ™‚ population æœ‰ä¸€å®šå¤šæ¨£æ€§
3. **ä½¿ç”¨å®Œæ•´å¯¦é©—çš„è³‡æ–™**: ç¢ºä¿ population å·²ç¶“å……åˆ†æ¼”åŒ–

---

## ğŸ’¡ å¯¦é©—åƒ¹å€¼

å„˜ç®¡é€™æ¬¡å¯¦é©—çš„è³‡æ–™ä¸ç†æƒ³ï¼Œä½†æˆ‘å€‘æˆåŠŸé©—è­‰äº†ï¼š

### âœ… æŠ€è¡“å¯è¡Œæ€§
1. **è…³æœ¬åŠŸèƒ½å®Œæ•´**: èƒ½å¤ æ­£ç¢ºè¼‰å…¥è³‡æ–™ã€è¨ˆç®—ç›¸ä¼¼åº¦ã€åŸ·è¡Œèšé¡ã€è©•ä¼° Silhouette Score
2. **è¨ˆç®—æ•ˆç‡é«˜**: å³ä½¿æ˜¯å°è¦æ¨¡è³‡æ–™ï¼Œæ•´å€‹æµç¨‹ä¹Ÿéå¸¸å¿«é€Ÿ
3. **çµæœè¨˜éŒ„å®Œå–„**: ç”Ÿæˆäº†è©³ç´°çš„ CSVã€JSON å’Œè¦–è¦ºåŒ–åœ–è¡¨

### âœ… æµç¨‹é©—è­‰
æ•´å€‹å‹•æ…‹é¸æ“‡æµç¨‹å·²ç¶“è¢«é©—è­‰ï¼š
```
è¼‰å…¥ Population â†’ è¨ˆç®—ç›¸ä¼¼åº¦çŸ©é™£ â†’ æ¸¬è©¦å¤šå€‹ k å€¼ â†’ 
è¨ˆç®— Silhouette Score â†’ é¸æ“‡æœ€ä½³ k â†’ è¨˜éŒ„çµæœ
```

### âœ… æ™‚é–“æ€§èƒ½
- ç›¸ä¼¼åº¦è¨ˆç®—: O(nÂ²) è¤‡é›œåº¦ï¼Œä½†å°å°è¦æ¨¡è³‡æ–™éå¸¸å¿«
- K å€¼æ¸¬è©¦: æ¯å€‹ k å€¼ç´„ 0.01-0.1s
- ç¸½æ™‚é–“: ç·šæ€§å¢é•·ï¼Œå¯æ“´å±•åˆ°æ›´å¤§è¦æ¨¡

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè­°

### 1. ä½¿ç”¨çœŸå¯¦æ¼”åŒ–è³‡æ–™
é‹è¡Œä¸€å€‹å®Œæ•´çš„ GP æ¼”åŒ–å¯¦é©—ï¼š
```python
CONFIG = {
    'population_size': 500,      # è¼ƒå¤§çš„ population
    'generations': 50,           # è¶³å¤ çš„æ¼”åŒ–ä»£æ•¸
    'save_generations': True,    # ä¿å­˜æ¯ä»£çš„ population
}
```

### 2. é¸æ“‡åˆé©çš„æ¸¬è©¦é»
åœ¨æ¼”åŒ–éç¨‹ä¸­é¸æ“‡å¹¾å€‹é—œéµæ™‚é–“é»ï¼š
- **æ—©æœŸ** (Gen 5-10): å¤šæ¨£æ€§é«˜ï¼Œæ¢ç´¢éšæ®µ
- **ä¸­æœŸ** (Gen 20-30): é–‹å§‹æ”¶æ–‚ï¼Œä½†ä»æœ‰å¤šæ¨£æ€§
- **å¾ŒæœŸ** (Gen 40-50): æ¥è¿‘æ”¶æ–‚ï¼Œå¤šæ¨£æ€§é™ä½

### 3. å°æ¯”å¯¦é©—
æ¯”è¼ƒä¸‰ç¨®ç­–ç•¥ï¼š
1. **å›ºå®š k=5**: å§‹çµ‚ä½¿ç”¨ 5 å€‹ niches
2. **å‹•æ…‹ k (Silhouette)**: æ ¹æ“š Silhouette Score é¸æ“‡
3. **ç„¡ Niching**: å‚³çµ±çš„ tournament selection

### 4. è©•ä¼°æŒ‡æ¨™
- **å¤šæ¨£æ€§ç¶­æŒ**: æ¼”åŒ–éç¨‹ä¸­çš„å¤šæ¨£æ€§è®ŠåŒ–
- **æ”¶æ–‚é€Ÿåº¦**: é”åˆ°æœ€ä½³ fitness çš„ä»£æ•¸
- **æ¸¬è©¦æœŸè¡¨ç¾**: æœ€çµ‚æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›
- **è¨ˆç®—é–‹éŠ·**: é¡å¤–çš„è¨ˆç®—æ™‚é–“

---

## ğŸ“ è¼¸å‡ºæª”æ¡ˆ

å¯¦é©—ç”Ÿæˆäº†ä»¥ä¸‹æª”æ¡ˆï¼š

1. **`dynamic_niche_summary.csv`**: æ‘˜è¦è¡¨æ ¼
2. **`dynamic_niche_detailed_results.json`**: è©³ç´°çµæœï¼ˆåŒ…å«æ¯å€‹ k å€¼çš„å®Œæ•´è³‡è¨Šï¼‰
3. **`dynamic_niche_results.png`**: è¦–è¦ºåŒ–åœ–è¡¨ï¼ˆ4 å€‹å­åœ–ï¼‰
4. **`EXPERIMENT_REPORT.md`**: æœ¬å ±å‘Š

---

## ğŸ”¬ æŠ€è¡“ç´°ç¯€

### Silhouette Score è¨ˆç®—
```
Silhouette Score = (b - a) / max(a, b)

å…¶ä¸­:
- a: æ¨£æœ¬èˆ‡åŒ cluster å…§å…¶ä»–æ¨£æœ¬çš„å¹³å‡è·é›¢
- b: æ¨£æœ¬èˆ‡æœ€è¿‘ cluster çš„å¹³å‡è·é›¢
- ç¯„åœ: [-1, 1]
- è¶Šé«˜è¶Šå¥½ï¼ˆ1 è¡¨ç¤ºå®Œç¾èšé¡ï¼Œ-1 è¡¨ç¤ºéŒ¯èª¤èšé¡ï¼‰
```

### ç‚ºä½•æ‰€æœ‰ Score éƒ½æ˜¯ 0.0ï¼Ÿ
ç•¶æ‰€æœ‰æ¨£æœ¬éƒ½è¢«åˆ†åˆ°åŒä¸€å€‹ cluster æ™‚ï¼š
- åªæœ‰ä¸€å€‹ clusterï¼Œç„¡æ³•è¨ˆç®— bï¼ˆæœ€è¿‘ cluster çš„è·é›¢ï¼‰
- Silhouette Score è¢«å®šç¾©ç‚º 0.0
- é€™è¡¨ç¤ºèšé¡å¤±æ•—ï¼Œç„¡æ³•å€åˆ†ä¸åŒçš„ niches

---

## ğŸ“Œ çµè«–

æœ¬æ¬¡å¯¦é©—æˆåŠŸå»ºç«‹äº†å‹•æ…‹ niche æ•¸é‡é¸æ“‡çš„å®Œæ•´æµç¨‹ï¼Œä¸¦é©—è­‰äº†æŠ€è¡“å¯è¡Œæ€§ã€‚ç„¶è€Œï¼Œç”±æ–¼æ¸¬è©¦è³‡æ–™çš„ population éå°ä¸”å¤šæ¨£æ€§ç‚ºé›¶ï¼Œç„¡æ³•å¾—å‡ºæœ‰æ„ç¾©çš„çµè«–ã€‚

**å»ºè­°**: ä½¿ç”¨æ›´å¤§è¦æ¨¡ã€æ›´å…·å¤šæ¨£æ€§çš„çœŸå¯¦æ¼”åŒ–è³‡æ–™é‡æ–°é€²è¡Œå¯¦é©—ï¼Œä»¥çœŸæ­£è©•ä¼°å‹•æ…‹ niche é¸æ“‡ç­–ç•¥çš„æ•ˆæœã€‚

---

**å¯¦é©—è…³æœ¬**: `scripts/analysis/experiment_dynamic_niche_selection.py`  
**åŸ·è¡Œå‘½ä»¤**: `python scripts/analysis/experiment_dynamic_niche_selection.py`
