{
  "config": {
    "tickers": [
      "ABX.TO",
      "BBD-B.TO",
      "RY.TO",
      "TRP.TO"
    ],
    "train_data_start": "1995-01-03",
    "train_backtest_start": "1997-06-25",
    "train_backtest_end": "1999-06-25",
    "test_data_start": "1997-06-25",
    "test_backtest_start": "1999-06-26",
    "test_backtest_end": "2001-06-26",
    "initial_capital": 100000.0,
    "population_size": 5000,
    "generations": 50,
    "crossover_prob": 0.8,
    "mutation_prob": 0.2,
    "tournament_size": 3,
    "fitness_metric": "sharpe_ratio",
    "risk_free_rate": 0.0,
    "early_stopping_enabled": true,
    "early_stopping_patience": 5,
    "early_stopping_min_delta": 0.001,
    "niching_enabled": true,
    "niching_n_clusters": 3,
    "niching_cross_ratio": 0.8,
    "niching_update_frequency": 1,
    "niching_algorithm": "kmeans",
    "output_dir": "portfolio_experiment_results",
    "experiment_name": "portfolio_exp_sharpe_20251023_125111"
  },
  "evolution_log": [
    {
      "generation": 1,
      "min_fitness": -1.4674337654342091,
      "avg_fitness": 0.0861458346533413,
      "max_fitness": 1.6877910350344212,
      "std_fitness": 0.1836021855656382,
      "eval_time": 121.63136,
      "timestamp": "2025-10-23T12:53:12.788663",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 2,
      "min_fitness": -1.9173014455232873,
      "avg_fitness": 0.1464645410960511,
      "max_fitness": 1.6877910350344212,
      "std_fitness": 0.17718722460908323,
      "eval_time": 106.926696,
      "timestamp": "2025-10-23T12:55:54.915602",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 3,
      "min_fitness": -1.115774304242187,
      "avg_fitness": 0.1821823572961593,
      "max_fitness": 1.8156820021329598,
      "std_fitness": 0.1981061080223145,
      "eval_time": 100.684101,
      "timestamp": "2025-10-23T12:58:47.326223",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 4,
      "min_fitness": -1.3420498339985256,
      "avg_fitness": 0.206813678007424,
      "max_fitness": 1.6877910350344212,
      "std_fitness": 0.22480345334905455,
      "eval_time": 99.534773,
      "timestamp": "2025-10-23T13:01:21.437661",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 5,
      "min_fitness": -1.7036630712817897,
      "avg_fitness": 0.23655034041409762,
      "max_fitness": 2.236192992109285,
      "std_fitness": 0.26544511827096906,
      "eval_time": 105.216403,
      "timestamp": "2025-10-23T13:04:02.926757",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 6,
      "min_fitness": -1.2624374167670913,
      "avg_fitness": 0.26844290751507344,
      "max_fitness": 1.8156820021329598,
      "std_fitness": 0.2982683040005373,
      "eval_time": 98.864783,
      "timestamp": "2025-10-23T13:06:48.947370",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 7,
      "min_fitness": -1.0941568543312916,
      "avg_fitness": 0.3095607656952473,
      "max_fitness": 1.65429904026722,
      "std_fitness": 0.3442280086020604,
      "eval_time": 97.294983,
      "timestamp": "2025-10-23T13:09:23.356910",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 8,
      "min_fitness": -1.032897987843892,
      "avg_fitness": 0.3315317868357304,
      "max_fitness": 1.65429904026722,
      "std_fitness": 0.3787335578513931,
      "eval_time": 101.711349,
      "timestamp": "2025-10-23T13:12:06.089325",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 9,
      "min_fitness": -1.3614838491873424,
      "avg_fitness": 0.35662898890153305,
      "max_fitness": 1.67658221438525,
      "std_fitness": 0.40618159582134855,
      "eval_time": 98.462577,
      "timestamp": "2025-10-23T13:14:46.879603",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 10,
      "min_fitness": -1.0154900915931842,
      "avg_fitness": 0.37995710744641725,
      "max_fitness": 2.4621343740472725,
      "std_fitness": 0.4345631435023028,
      "eval_time": 99.090256,
      "timestamp": "2025-10-23T13:17:30.468676",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 11,
      "min_fitness": -1.2260289332849024,
      "avg_fitness": 0.40416878895718344,
      "max_fitness": 2.4621343740472725,
      "std_fitness": 0.4632111346530948,
      "eval_time": 99.529134,
      "timestamp": "2025-10-23T13:20:16.688917",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 12,
      "min_fitness": -1.402964678348447,
      "avg_fitness": 0.39217542215373896,
      "max_fitness": 2.4621343740472725,
      "std_fitness": 0.47228370921013124,
      "eval_time": 100.181514,
      "timestamp": "2025-10-23T13:23:08.157348",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 13,
      "min_fitness": -1.5186987558165832,
      "avg_fitness": 0.4389130384208014,
      "max_fitness": 2.2512800952803658,
      "std_fitness": 0.5054072329529462,
      "eval_time": 99.243878,
      "timestamp": "2025-10-23T13:25:54.903674",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 14,
      "min_fitness": -1.2949744972161477,
      "avg_fitness": 0.4473173055834479,
      "max_fitness": 2.252847503564937,
      "std_fitness": 0.5291089944545754,
      "eval_time": 99.235514,
      "timestamp": "2025-10-23T13:28:48.233548",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 15,
      "min_fitness": -1.5311155676349293,
      "avg_fitness": 0.46934230526809023,
      "max_fitness": 2.2348218707298613,
      "std_fitness": 0.549055712763596,
      "eval_time": 107.717644,
      "timestamp": "2025-10-23T13:32:13.206123",
      "early_stopped": true,
      "early_stop_reason": "No improvement for 5 generations"
    }
  ],
  "total_time": 2462.351248,
  "actual_generations": 15,
  "final_statistics": {
    "best_fitness": 2.4621343740472725,
    "best_pnl": 246213.43740472724
  },
  "early_stopping": {
    "enabled": true,
    "triggered": true,
    "status": {
      "counter": 5,
      "best_fitness": 2.4621343740472725,
      "should_stop": true,
      "generation": 15,
      "patience": 5,
      "min_delta": 0.001,
      "mode": "max"
    }
  },
  "niching": {
    "enabled": true,
    "n_clusters": 3,
    "cross_ratio": 0.8,
    "update_frequency": 1,
    "algorithm": "kmeans",
    "log": [
      {
        "generation": 1,
        "selected_k": 3,
        "avg_similarity": 0.34842464492898545,
        "diversity_score": 0.6515753550710146,
        "silhouette_score": 0.09783077885601979,
        "niche_sizes": {
          "0": 1428,
          "1": 3161,
          "2": 411
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.24958140228761447,
            "std": 0.0051722725441045265,
            "min": 0.24246671338472314,
            "max": 0.25648213034337775,
            "size": 1428
          },
          "1": {
            "mean": -0.08802541859747372,
            "std": 0.07103922636631084,
            "min": -0.2659982191940016,
            "max": -0.001964580888371666,
            "size": 3161
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 411
          }
        },
        "computation_time": 52.767735,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 2,
        "selected_k": 3,
        "avg_similarity": 0.40307124983726833,
        "diversity_score": 0.5969287501627316,
        "silhouette_score": 0.29329267985037694,
        "niche_sizes": {
          "0": 1319,
          "1": 2320,
          "2": 1361
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1319
          },
          "1": {
            "mean": -0.09822951857804153,
            "std": 0.07504108692777799,
            "min": -0.287344917508849,
            "max": 0.003357358467351387,
            "size": 2320
          },
          "2": {
            "mean": 0.2757941824782815,
            "std": 0.0908279428348589,
            "min": 0.18676470588235294,
            "max": 0.38897058823529407,
            "size": 1361
          }
        },
        "computation_time": 68.427953,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 3,
        "selected_k": 3,
        "avg_similarity": 0.3956673438814758,
        "diversity_score": 0.6043326561185243,
        "silhouette_score": 0.30293819897768165,
        "niche_sizes": {
          "0": 2298,
          "1": 1326,
          "2": 1376
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.09054052512201217,
            "std": 0.07494873943694692,
            "min": -0.30310372177893213,
            "max": 0.002905775762503599,
            "size": 2298
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1326
          },
          "2": {
            "mean": 0.2883380244322619,
            "std": 0.17064833924613493,
            "min": -0.1361256544502549,
            "max": 0.4625454545454546,
            "size": 1376
          }
        },
        "computation_time": 51.976769,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 4,
        "selected_k": 3,
        "avg_similarity": 0.3924373458991945,
        "diversity_score": 0.6075626541008055,
        "silhouette_score": 0.31958871234657993,
        "niche_sizes": {
          "0": 2275,
          "1": 1361,
          "2": 1364
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08482526058743316,
            "std": 0.07411095427894027,
            "min": -0.3117512769367349,
            "max": 0.0037105583963508676,
            "size": 2275
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1361
          },
          "2": {
            "mean": 0.3151913706519867,
            "std": 0.21846665561319592,
            "min": -0.11570069204151723,
            "max": 0.5187087307410125,
            "size": 1364
          }
        },
        "computation_time": 53.25685,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 5,
        "selected_k": 3,
        "avg_similarity": 0.38625386571686593,
        "diversity_score": 0.6137461342831341,
        "silhouette_score": 0.31775788627103974,
        "niche_sizes": {
          "0": 2328,
          "1": 1324,
          "2": 1348
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08125934084948204,
            "std": 0.07621759845664706,
            "min": -0.31438264342972755,
            "max": 0.007120272271903237,
            "size": 2328
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1324
          },
          "2": {
            "mean": 0.3367664516712113,
            "std": 0.24005231100328406,
            "min": -0.101800400088904,
            "max": 0.5493689680772086,
            "size": 1348
          }
        },
        "computation_time": 64.451979,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 6,
        "selected_k": 3,
        "avg_similarity": 0.3886898987734058,
        "diversity_score": 0.6113101012265942,
        "silhouette_score": 0.32229944395287247,
        "niche_sizes": {
          "0": 2227,
          "1": 1358,
          "2": 1415
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.07705250728323812,
            "std": 0.0713341904954699,
            "min": -0.3067754961613554,
            "max": 0.005765029213135306,
            "size": 2227
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1358
          },
          "2": {
            "mean": 0.30041918974143716,
            "std": 0.22276034303208062,
            "min": -0.1125523012552241,
            "max": 0.5113154172560113,
            "size": 1415
          }
        },
        "computation_time": 54.110194,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 7,
        "selected_k": 3,
        "avg_similarity": 0.38208094889196526,
        "diversity_score": 0.6179190511080348,
        "silhouette_score": 0.3282332346215545,
        "niche_sizes": {
          "0": 1338,
          "1": 1355,
          "2": 2307
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.3491994047784803,
            "std": 0.254126507237045,
            "min": -0.08944381384789533,
            "max": 0.5669409124906507,
            "size": 1338
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1355
          },
          "2": {
            "mean": -0.07848401841605293,
            "std": 0.07061956090903805,
            "min": -0.3231386522595562,
            "max": 0.004248434497471193,
            "size": 2307
          }
        },
        "computation_time": 57.991672,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 8,
        "selected_k": 3,
        "avg_similarity": 0.3791814786762433,
        "diversity_score": 0.6208185213237567,
        "silhouette_score": 0.32048180958965866,
        "niche_sizes": {
          "0": 2311,
          "1": 1356,
          "2": 1333
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.07612620641634565,
            "std": 0.06965137157914725,
            "min": -0.32455184202690657,
            "max": 0.00538884153944164,
            "size": 2311
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1356
          },
          "2": {
            "mean": 0.3168317411676432,
            "std": 0.24813350384855415,
            "min": -0.08662857142856648,
            "max": 0.5405405405405406,
            "size": 1333
          }
        },
        "computation_time": 59.412209,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 9,
        "selected_k": 3,
        "avg_similarity": 0.3838821279378533,
        "diversity_score": 0.6161178720621467,
        "silhouette_score": 0.32243102904006216,
        "niche_sizes": {
          "0": 2252,
          "1": 1346,
          "2": 1402
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.07453619907723193,
            "std": 0.07419894478271521,
            "min": -0.3218722071036184,
            "max": 0.0108097900051421,
            "size": 2252
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1346
          },
          "2": {
            "mean": 0.30956538197021194,
            "std": 0.26035893029862583,
            "min": -0.060991957104552914,
            "max": 0.5446109921484654,
            "size": 1402
          }
        },
        "computation_time": 61.774406,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 10,
        "selected_k": 3,
        "avg_similarity": 0.3847768689264548,
        "diversity_score": 0.6152231310735452,
        "silhouette_score": 0.34362924361076774,
        "niche_sizes": {
          "0": 2252,
          "1": 1385,
          "2": 1363
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.07447656956502824,
            "std": 0.07676390598112409,
            "min": -0.32595324550139637,
            "max": 0.021150211898760533,
            "size": 2252
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1385
          },
          "2": {
            "mean": 0.3674742866575806,
            "std": 0.28174009651826554,
            "min": -0.05982512655314759,
            "max": 0.5969162995594713,
            "size": 1363
          }
        },
        "computation_time": 64.193985,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 11,
        "selected_k": 3,
        "avg_similarity": 0.38158477058759566,
        "diversity_score": 0.6184152294124043,
        "silhouette_score": 0.39572498294708225,
        "niche_sizes": {
          "0": 2761,
          "1": 1364,
          "2": 875
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.09430463066446533,
            "std": 0.10721548294537178,
            "min": -0.31014372005832164,
            "max": 0.027592844202891938,
            "size": 2761
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1364
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 875
          }
        },
        "computation_time": 68.490567,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 12,
        "selected_k": 3,
        "avg_similarity": 0.4087020922279695,
        "diversity_score": 0.5912979077720305,
        "silhouette_score": 0.5032365505256614,
        "niche_sizes": {
          "0": 1359,
          "1": 2284,
          "2": 1357
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1359
          },
          "1": {
            "mean": -0.08748565997009324,
            "std": 0.09877084340116571,
            "min": -0.32497132997247663,
            "max": 0.02582493794713782,
            "size": 2284
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1357
          }
        },
        "computation_time": 64.816043,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 13,
        "selected_k": 3,
        "avg_similarity": 0.4008829547998623,
        "diversity_score": 0.5991170452001378,
        "silhouette_score": 0.49848809843437414,
        "niche_sizes": {
          "0": 2313,
          "1": 1376,
          "2": 1311
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08411565405453054,
            "std": 0.09774505533544388,
            "min": -0.3305451638189345,
            "max": 0.025761702854039496,
            "size": 2313
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1376
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1311
          }
        },
        "computation_time": 71.723428,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 14,
        "selected_k": 3,
        "avg_similarity": 0.3976609983783866,
        "diversity_score": 0.6023390016216135,
        "silhouette_score": 0.49921047315690703,
        "niche_sizes": {
          "0": 2314,
          "1": 1350,
          "2": 1336
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08208627234894753,
            "std": 0.09829551455000483,
            "min": -0.33143449394079033,
            "max": 0.02889315223134115,
            "size": 2314
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1350
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1336
          }
        },
        "computation_time": 94.401604,
        "k_selection_mode": "fixed"
      }
    ]
  }
}