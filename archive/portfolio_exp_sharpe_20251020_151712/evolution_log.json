{
  "config": {
    "tickers": [
      "ABX.TO",
      "BBD-B.TO",
      "RY.TO",
      "TRP.TO"
    ],
    "train_data_start": "2019-07-01",
    "train_backtest_start": "2020-01-01",
    "train_backtest_end": "2023-12-31",
    "test_data_start": "2023-07-01",
    "test_backtest_start": "2024-01-01",
    "test_backtest_end": "2025-07-01",
    "initial_capital": 100000.0,
    "population_size": 5000,
    "generations": 50,
    "crossover_prob": 0.8,
    "mutation_prob": 0.2,
    "tournament_size": 3,
    "fitness_metric": "sharpe_ratio",
    "risk_free_rate": 0.0,
    "early_stopping_enabled": true,
    "early_stopping_patience": 5,
    "early_stopping_min_delta": 0.001,
    "niching_enabled": true,
    "niching_n_clusters": 3,
    "niching_cross_ratio": 0.8,
    "niching_update_frequency": 1,
    "niching_algorithm": "kmeans",
    "output_dir": "portfolio_experiment_results",
    "experiment_name": "portfolio_exp_sharpe_20251020_151712"
  },
  "evolution_log": [
    {
      "generation": 1,
      "min_fitness": -0.8609151252284339,
      "avg_fitness": 0.15716288051756297,
      "max_fitness": 1.6528168909214622,
      "std_fitness": 0.22175095065289036,
      "eval_time": 311.2239,
      "timestamp": "2025-10-20T15:22:23.528064",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 2,
      "min_fitness": -0.6428917020323364,
      "avg_fitness": 0.2409577598189628,
      "max_fitness": 1.6528168909214622,
      "std_fitness": 0.22771399606357628,
      "eval_time": 261.402701,
      "timestamp": "2025-10-20T15:27:34.158922",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 3,
      "min_fitness": -1.2576128960001727,
      "avg_fitness": 0.29397892886068067,
      "max_fitness": 1.9548482213337437,
      "std_fitness": 0.26323572894077185,
      "eval_time": 258.158424,
      "timestamp": "2025-10-20T15:32:36.927081",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 4,
      "min_fitness": -0.6335866609060754,
      "avg_fitness": 0.34341789540234136,
      "max_fitness": 1.9548482213337437,
      "std_fitness": 0.3015789411184301,
      "eval_time": 262.015511,
      "timestamp": "2025-10-20T15:37:46.798181",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 5,
      "min_fitness": -0.86176401360966,
      "avg_fitness": 0.3857664408723697,
      "max_fitness": 1.9548482213337437,
      "std_fitness": 0.3444822111169982,
      "eval_time": 256.396895,
      "timestamp": "2025-10-20T15:42:52.716434",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 6,
      "min_fitness": -0.6056773374268868,
      "avg_fitness": 0.4131882299910676,
      "max_fitness": 1.9548482213337437,
      "std_fitness": 0.3863412429094449,
      "eval_time": 255.724617,
      "timestamp": "2025-10-20T15:47:57.281675",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 7,
      "min_fitness": -1.01047120793243,
      "avg_fitness": 0.4420262275296429,
      "max_fitness": 1.9548482213337437,
      "std_fitness": 0.4227767475431514,
      "eval_time": 266.572532,
      "timestamp": "2025-10-20T15:53:14.004249",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 8,
      "min_fitness": -0.7095744403289803,
      "avg_fitness": 0.48923683623520436,
      "max_fitness": 1.9548482213337437,
      "std_fitness": 0.46374487928869096,
      "eval_time": 269.776722,
      "timestamp": "2025-10-20T15:58:37.337586",
      "early_stopped": true,
      "early_stop_reason": "No improvement for 5 generations"
    }
  ],
  "total_time": 2485.319692,
  "actual_generations": 8,
  "final_statistics": {
    "best_fitness": 1.9548482213337437,
    "best_pnl": 195484.82213337437
  },
  "early_stopping": {
    "enabled": true,
    "triggered": true,
    "status": {
      "counter": 5,
      "best_fitness": 1.9548482213337437,
      "should_stop": true,
      "generation": 8,
      "patience": 5,
      "min_delta": 0.001,
      "mode": "max"
    }
  },
  "niching": {
    "enabled": true,
    "n_clusters": 3,
    "cross_ratio": 0.8,
    "update_frequency": 1,
    "algorithm": "kmeans",
    "log": [
      {
        "generation": 1,
        "selected_k": 3,
        "avg_similarity": 0.34920736013869424,
        "diversity_score": 0.6507926398613058,
        "silhouette_score": 0.10528705220895337,
        "niche_sizes": {
          "0": 3145,
          "1": 1405,
          "2": 450
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08738577797099074,
            "std": 0.06998922325840982,
            "min": -0.2684402388893294,
            "max": -0.006545031960676287,
            "size": 3145
          },
          "1": {
            "mean": 0.2500096318601657,
            "std": 0.011800725485025107,
            "min": 0.23575498575498577,
            "max": 0.2678062678062678,
            "size": 1405
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 450
          }
        },
        "computation_time": 45.925598,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 2,
        "selected_k": 3,
        "avg_similarity": 0.3994809912458686,
        "diversity_score": 0.6005190087541314,
        "silhouette_score": 0.29756347990176335,
        "niche_sizes": {
          "0": 2325,
          "1": 1329,
          "2": 1346
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.09475303918475961,
            "std": 0.07853073277950312,
            "min": -0.29260850974395675,
            "max": 0.004037169084533609,
            "size": 2325
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1329
          },
          "2": {
            "mean": 0.2816628644973127,
            "std": 0.09812469980087447,
            "min": 0.1613382899628253,
            "max": 0.3992565055762082,
            "size": 1346
          }
        },
        "computation_time": 41.730743,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 3,
        "selected_k": 3,
        "avg_similarity": 0.3895719697272792,
        "diversity_score": 0.6104280302727207,
        "silhouette_score": 0.29803718168645976,
        "niche_sizes": {
          "0": 1293,
          "1": 2319,
          "2": 1388
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1293
          },
          "1": {
            "mean": -0.08582952475905518,
            "std": 0.07708810488265179,
            "min": -0.3061235544240742,
            "max": 0.005626536842433908,
            "size": 2319
          },
          "2": {
            "mean": 0.28546439218195074,
            "std": 0.1629076426932131,
            "min": -0.1455852156057424,
            "max": 0.45349675558759917,
            "size": 1388
          }
        },
        "computation_time": 44.73191,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 4,
        "selected_k": 3,
        "avg_similarity": 0.39455582008465184,
        "diversity_score": 0.6054441799153482,
        "silhouette_score": 0.32641355035888375,
        "niche_sizes": {
          "0": 2260,
          "1": 1373,
          "2": 1367
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.0706261103187039,
            "std": 0.07625314067302497,
            "min": -0.3112654892310388,
            "max": 0.013976819122290369,
            "size": 2260
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1373
          },
          "2": {
            "mean": 0.30627853775763664,
            "std": 0.19739940648035198,
            "min": -0.131779661016943,
            "max": 0.49707174231332363,
            "size": 1367
          }
        },
        "computation_time": 46.433365,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 5,
        "selected_k": 3,
        "avg_similarity": 0.390264698495255,
        "diversity_score": 0.609735301504745,
        "silhouette_score": 0.33112102597388215,
        "niche_sizes": {
          "0": 1325,
          "1": 2295,
          "2": 1380
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1325
          },
          "1": {
            "mean": -0.06741315250762196,
            "std": 0.07799231434186346,
            "min": -0.313455063685758,
            "max": 0.014466943097848243,
            "size": 2295
          },
          "2": {
            "mean": 0.35167993831478483,
            "std": 0.23281046464328262,
            "min": -0.11013121101311578,
            "max": 0.555474981870921,
            "size": 1380
          }
        },
        "computation_time": 46.150156,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 6,
        "selected_k": 3,
        "avg_similarity": 0.3957965968720445,
        "diversity_score": 0.6042034031279555,
        "silhouette_score": 0.3429242648075379,
        "niche_sizes": {
          "0": 2209,
          "1": 1353,
          "2": 1438
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.06202369734299757,
            "std": 0.07717696809712388,
            "min": -0.31727679310916057,
            "max": 0.02269863261962507,
            "size": 2209
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1353
          },
          "2": {
            "mean": 0.3467535962923304,
            "std": 0.23313457118944256,
            "min": -0.1059726254666056,
            "max": 0.5518441196938065,
            "size": 1438
          }
        },
        "computation_time": 47.321536,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 7,
        "selected_k": 3,
        "avg_similarity": 0.394869029202667,
        "diversity_score": 0.605130970797333,
        "silhouette_score": 0.3498989798024371,
        "niche_sizes": {
          "0": 1403,
          "1": 1351,
          "2": 2246
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.3731767116216151,
            "std": 0.25145352459701004,
            "min": -0.09800557580955925,
            "max": 0.5820256776034236,
            "size": 1403
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1351
          },
          "2": {
            "mean": -0.055686566069875515,
            "std": 0.07900082797438276,
            "min": -0.3155885256373036,
            "max": 0.043522245158499916,
            "size": 2246
          }
        },
        "computation_time": 50.524778,
        "k_selection_mode": "fixed"
      }
    ]
  }
}