{
  "config": {
    "tickers": [
      "ABX.TO",
      "BBD-B.TO",
      "RY.TO",
      "TRP.TO"
    ],
    "train_data_start": "1995-01-03",
    "train_backtest_start": "1997-06-25",
    "train_backtest_end": "1999-06-25",
    "test_data_start": "1997-06-25",
    "test_backtest_start": "1999-06-26",
    "test_backtest_end": "2001-06-26",
    "initial_capital": 100000.0,
    "population_size": 5000,
    "generations": 50,
    "crossover_prob": 0.8,
    "mutation_prob": 0.2,
    "tournament_size": 3,
    "fitness_metric": "sharpe_ratio",
    "risk_free_rate": 0.0,
    "early_stopping_enabled": true,
    "early_stopping_patience": 5,
    "early_stopping_min_delta": 0.001,
    "niching_enabled": true,
    "niching_n_clusters": 3,
    "niching_cross_ratio": 0.8,
    "niching_update_frequency": 1,
    "niching_algorithm": "kmeans",
    "output_dir": "portfolio_experiment_results",
    "experiment_name": "portfolio_exp_sharpe_20251023_103520"
  },
  "evolution_log": [
    {
      "generation": 1,
      "min_fitness": -1.446744770919637,
      "avg_fitness": 0.08599233608857716,
      "max_fitness": 1.668917973182751,
      "std_fitness": 0.17997174208528682,
      "eval_time": 116.926109,
      "timestamp": "2025-10-23T10:37:17.155009",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 2,
      "min_fitness": -1.2317962460398084,
      "avg_fitness": 0.1426523963585679,
      "max_fitness": 1.668917973182751,
      "std_fitness": 0.16735489922078015,
      "eval_time": 102.759356,
      "timestamp": "2025-10-23T10:39:52.088911",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 3,
      "min_fitness": -1.5311155676349293,
      "avg_fitness": 0.17391657035384306,
      "max_fitness": 1.426527471550368,
      "std_fitness": 0.19737351216250917,
      "eval_time": 115.218001,
      "timestamp": "2025-10-23T10:42:38.434492",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 4,
      "min_fitness": -1.5708657333055152,
      "avg_fitness": 0.19932808451115047,
      "max_fitness": 1.9673569568282243,
      "std_fitness": 0.22379756354718927,
      "eval_time": 101.953544,
      "timestamp": "2025-10-23T10:45:22.995146",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 5,
      "min_fitness": -1.5708657333055152,
      "avg_fitness": 0.22032352597195495,
      "max_fitness": 1.9673569568282243,
      "std_fitness": 0.23878414411239998,
      "eval_time": 100.681181,
      "timestamp": "2025-10-23T10:48:00.464822",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 6,
      "min_fitness": -1.5708657333055152,
      "avg_fitness": 0.2350632491375358,
      "max_fitness": 1.9673569568282243,
      "std_fitness": 0.26082002433376583,
      "eval_time": 99.269332,
      "timestamp": "2025-10-23T10:50:35.459907",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 7,
      "min_fitness": -1.4019637457220153,
      "avg_fitness": 0.24474086527874747,
      "max_fitness": 1.9673569568282243,
      "std_fitness": 0.27437329622578066,
      "eval_time": 99.089009,
      "timestamp": "2025-10-23T10:53:09.490270",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 8,
      "min_fitness": -1.1885150483724813,
      "avg_fitness": 0.26491769721654607,
      "max_fitness": 1.9673569568282243,
      "std_fitness": 0.2943321102365877,
      "eval_time": 99.390952,
      "timestamp": "2025-10-23T10:55:46.008880",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 9,
      "min_fitness": -1.3614838491873424,
      "avg_fitness": 0.26649102291810767,
      "max_fitness": 1.9673569568282243,
      "std_fitness": 0.3111257694789208,
      "eval_time": 100.458738,
      "timestamp": "2025-10-23T10:58:23.723003",
      "early_stopped": true,
      "early_stop_reason": "No improvement for 5 generations"
    }
  ],
  "total_time": 1383.826434,
  "actual_generations": 9,
  "final_statistics": {
    "best_fitness": 1.9673569568282243,
    "best_pnl": 196735.69568282244
  },
  "early_stopping": {
    "enabled": true,
    "triggered": true,
    "status": {
      "counter": 5,
      "best_fitness": 1.9673569568282243,
      "should_stop": true,
      "generation": 9,
      "patience": 5,
      "min_delta": 0.001,
      "mode": "max"
    }
  },
  "niching": {
    "enabled": true,
    "n_clusters": 3,
    "cross_ratio": 0.8,
    "update_frequency": 1,
    "algorithm": "kmeans",
    "log": [
      {
        "generation": 1,
        "selected_k": 3,
        "avg_similarity": 0.3484726051877041,
        "diversity_score": 0.6515273948122959,
        "silhouette_score": 0.08673088517007078,
        "niche_sizes": {
          "0": 3153,
          "1": 386,
          "2": 1461
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.10091422786267555,
            "std": 0.07813581839688306,
            "min": -0.26531944153090614,
            "max": -0.0028197487163230573,
            "size": 3153
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 386
          },
          "2": {
            "mean": 0.2504017702268103,
            "std": 0.01530626750913333,
            "min": 0.23561643835616441,
            "max": 0.2719178082191781,
            "size": 1461
          }
        },
        "computation_time": 49.366372,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 2,
        "selected_k": 3,
        "avg_similarity": 0.39639400200675035,
        "diversity_score": 0.6036059979932497,
        "silhouette_score": 0.2763532601698986,
        "niche_sizes": {
          "0": 1260,
          "1": 2384,
          "2": 1356
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1260
          },
          "1": {
            "mean": -0.11079542037598042,
            "std": 0.08076282310357917,
            "min": -0.28558784144541755,
            "max": 0.0033465219911209057,
            "size": 2384
          },
          "2": {
            "mean": 0.28458892553527304,
            "std": 0.09034875300287135,
            "min": 0.1512915129151291,
            "max": 0.374169741697417,
            "size": 1356
          }
        },
        "computation_time": 48.484983,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 3,
        "selected_k": 3,
        "avg_similarity": 0.38553971926275565,
        "diversity_score": 0.6144602807372443,
        "silhouette_score": 0.2731401266931846,
        "niche_sizes": {
          "0": 2417,
          "1": 1189,
          "2": 1394
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.11351871883264336,
            "std": 0.08284419665698725,
            "min": -0.304170846793745,
            "max": 0.0008345898375909872,
            "size": 2417
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1189
          },
          "2": {
            "mean": 0.32358348413516647,
            "std": 0.12810649079470196,
            "min": 0.11701363962670497,
            "max": 0.44364680545585067,
            "size": 1394
          }
        },
        "computation_time": 59.710188,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 4,
        "selected_k": 3,
        "avg_similarity": 0.39128203148566215,
        "diversity_score": 0.6087179685143378,
        "silhouette_score": 0.29248961385714367,
        "niche_sizes": {
          "0": 1236,
          "1": 2341,
          "2": 1423
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1236
          },
          "1": {
            "mean": -0.11174821171536702,
            "std": 0.08584245978739552,
            "min": -0.3088908922395805,
            "max": 0.005666463166489759,
            "size": 2341
          },
          "2": {
            "mean": 0.342973037885729,
            "std": 0.14089373244237324,
            "min": 0.09071729957805907,
            "max": 0.47116736990154706,
            "size": 1423
          }
        },
        "computation_time": 54.353999,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 5,
        "selected_k": 3,
        "avg_similarity": 0.3881794219565404,
        "diversity_score": 0.6118205780434596,
        "silhouette_score": 0.29255548787127755,
        "niche_sizes": {
          "0": 1445,
          "1": 1187,
          "2": 2368
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.37246882458376873,
            "std": 0.16560326422664381,
            "min": 0.0761772853185596,
            "max": 0.5186980609418282,
            "size": 1445
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1187
          },
          "2": {
            "mean": -0.11082770784086055,
            "std": 0.08723910040810275,
            "min": -0.31470427863481326,
            "max": 0.008010340595916507,
            "size": 2368
          }
        },
        "computation_time": 53.108017,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 6,
        "selected_k": 3,
        "avg_similarity": 0.3875982195457854,
        "diversity_score": 0.6124017804542146,
        "silhouette_score": 0.29728371024464406,
        "niche_sizes": {
          "0": 2353,
          "1": 1237,
          "2": 1410
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.1102032321894261,
            "std": 0.08768981251244426,
            "min": -0.3186215440136241,
            "max": 0.007967889536795359,
            "size": 2353
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1237
          },
          "2": {
            "mean": 0.3607991181311628,
            "std": 0.15736933906461928,
            "min": 0.09155429382540814,
            "max": 0.5017743080198722,
            "size": 1410
          }
        },
        "computation_time": 52.296927,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 7,
        "selected_k": 3,
        "avg_similarity": 0.38617852318804347,
        "diversity_score": 0.6138214768119565,
        "silhouette_score": 0.29986537127582236,
        "niche_sizes": {
          "0": 1222,
          "1": 1386,
          "2": 2392
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1222
          },
          "1": {
            "mean": 0.3890790316783096,
            "std": 0.18250785065723268,
            "min": 0.07075812274368232,
            "max": 0.5465703971119134,
            "size": 1386
          },
          "2": {
            "mean": -0.10950530164173301,
            "std": 0.08743646726352304,
            "min": -0.3199760012243157,
            "max": 0.009686323713956025,
            "size": 2392
          }
        },
        "computation_time": 54.149913,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 8,
        "selected_k": 3,
        "avg_similarity": 0.38823054101729376,
        "diversity_score": 0.6117694589827063,
        "silhouette_score": 0.30920327533501907,
        "niche_sizes": {
          "0": 1420,
          "1": 1220,
          "2": 2360
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.41050432262354963,
            "std": 0.19638046206311202,
            "min": 0.054263565891472854,
            "max": 0.5736434108527132,
            "size": 1420
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1220
          },
          "2": {
            "mean": -0.10885583112302767,
            "std": 0.08845347428272363,
            "min": -0.32154806300390065,
            "max": 0.010390803205581466,
            "size": 2360
          }
        },
        "computation_time": 54.758169,
        "k_selection_mode": "fixed"
      }
    ]
  }
}