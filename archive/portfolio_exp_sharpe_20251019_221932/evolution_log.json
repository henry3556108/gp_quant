{
  "config": {
    "tickers": [
      "ABX.TO",
      "BBD-B.TO",
      "RY.TO",
      "TRP.TO"
    ],
    "train_data_start": "1995-01-03",
    "train_backtest_start": "1997-06-25",
    "train_backtest_end": "1999-06-25",
    "test_data_start": "1997-06-25",
    "test_backtest_start": "1999-06-26",
    "test_backtest_end": "2001-06-26",
    "initial_capital": 100000.0,
    "population_size": 5000,
    "generations": 50,
    "crossover_prob": 0.8,
    "mutation_prob": 0.2,
    "tournament_size": 3,
    "fitness_metric": "sharpe_ratio",
    "risk_free_rate": 0.0,
    "early_stopping_enabled": true,
    "early_stopping_patience": 5,
    "early_stopping_min_delta": 0.001,
    "niching_enabled": true,
    "niching_n_clusters": 3,
    "niching_cross_ratio": 0.8,
    "niching_update_frequency": 1,
    "niching_algorithm": "kmeans",
    "output_dir": "portfolio_experiment_results",
    "experiment_name": "portfolio_exp_sharpe_20251019_221932"
  },
  "evolution_log": [
    {
      "generation": 1,
      "min_fitness": -1.5655662218279256,
      "avg_fitness": 0.09256390089442083,
      "max_fitness": 1.6160230122860204,
      "std_fitness": 0.1882978390696172,
      "eval_time": 123.756131,
      "timestamp": "2025-10-19T22:21:36.448374",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 2,
      "min_fitness": -1.0778267583271024,
      "avg_fitness": 0.15047810319859564,
      "max_fitness": 1.8516590877539456,
      "std_fitness": 0.1784768888978357,
      "eval_time": 107.33423,
      "timestamp": "2025-10-19T22:24:20.670642",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 3,
      "min_fitness": -1.6197166433165338,
      "avg_fitness": 0.1871157973206617,
      "max_fitness": 1.8516590877539456,
      "std_fitness": 0.21441582919539823,
      "eval_time": 100.400929,
      "timestamp": "2025-10-19T22:26:51.273377",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 4,
      "min_fitness": -1.4801924823971881,
      "avg_fitness": 0.2173836291473007,
      "max_fitness": 2.091351452935332,
      "std_fitness": 0.2442875853877014,
      "eval_time": 109.66879,
      "timestamp": "2025-10-19T22:29:29.469279",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 5,
      "min_fitness": -1.1926723974253999,
      "avg_fitness": 0.24286868759927394,
      "max_fitness": 2.091351452935332,
      "std_fitness": 0.27981336595911577,
      "eval_time": 107.633451,
      "timestamp": "2025-10-19T22:32:21.573399",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 6,
      "min_fitness": -1.0430497706698278,
      "avg_fitness": 0.2757987327910493,
      "max_fitness": 2.091351452935332,
      "std_fitness": 0.3082461277478067,
      "eval_time": 106.110009,
      "timestamp": "2025-10-19T22:35:14.785796",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 7,
      "min_fitness": -1.2485954439461644,
      "avg_fitness": 0.3139229391447381,
      "max_fitness": 2.091351452935332,
      "std_fitness": 0.3525192919641782,
      "eval_time": 110.77803,
      "timestamp": "2025-10-19T22:37:57.926834",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 8,
      "min_fitness": -1.658820345586783,
      "avg_fitness": 0.3325457161947622,
      "max_fitness": 2.091351452935332,
      "std_fitness": 0.38174746425392386,
      "eval_time": 119.037369,
      "timestamp": "2025-10-19T22:41:00.570249",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 9,
      "min_fitness": -1.4731949906689712,
      "avg_fitness": 0.344537077224672,
      "max_fitness": 2.091351452935332,
      "std_fitness": 0.39479508643952627,
      "eval_time": 104.179689,
      "timestamp": "2025-10-19T22:44:10.934744",
      "early_stopped": true,
      "early_stop_reason": "No improvement for 5 generations"
    }
  ],
  "total_time": 1478.528467,
  "actual_generations": 9,
  "final_statistics": {
    "best_fitness": 2.091351452935332,
    "best_pnl": 209135.1452935332
  },
  "early_stopping": {
    "enabled": true,
    "triggered": true,
    "status": {
      "counter": 5,
      "best_fitness": 2.091351452935332,
      "should_stop": true,
      "generation": 9,
      "patience": 5,
      "min_delta": 0.001,
      "mode": "max"
    }
  },
  "niching": {
    "enabled": true,
    "n_clusters": 3,
    "cross_ratio": 0.8,
    "update_frequency": 1,
    "algorithm": "kmeans",
    "log": [
      {
        "generation": 1,
        "selected_k": 3,
        "avg_similarity": 0.3502467186770686,
        "diversity_score": 0.6497532813229314,
        "silhouette_score": 0.09951790492085395,
        "niche_sizes": {
          "0": 3145,
          "1": 1452,
          "2": 403
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.0852094985858565,
            "std": 0.07085826307495345,
            "min": -0.26610644257704075,
            "max": -0.0015479755513424012,
            "size": 3145
          },
          "1": {
            "mean": 0.2497061967333254,
            "std": 0.007567068902609217,
            "min": 0.24328049620951064,
            "max": 0.2618883528600965,
            "size": 1452
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 403
          }
        },
        "computation_time": 53.786172,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 2,
        "selected_k": 3,
        "avg_similarity": 0.40177032616047076,
        "diversity_score": 0.5982296738395292,
        "silhouette_score": 0.29622497361334915,
        "niche_sizes": {
          "0": 1341,
          "1": 2340,
          "2": 1319
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1341
          },
          "1": {
            "mean": -0.09753687401528766,
            "std": 0.07766086993019893,
            "min": -0.29268085461790466,
            "max": 0.0038779291109686128,
            "size": 2340
          },
          "2": {
            "mean": 0.27927305023693627,
            "std": 0.09679569326928598,
            "min": 0.1805766312594841,
            "max": 0.3975720789074355,
            "size": 1319
          }
        },
        "computation_time": 47.455986,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 3,
        "selected_k": 3,
        "avg_similarity": 0.39650549463716706,
        "diversity_score": 0.6034945053628329,
        "silhouette_score": 0.3089495462941894,
        "niche_sizes": {
          "0": 1396,
          "1": 2284,
          "2": 1320
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.310503910963358,
            "std": 0.19221223316081842,
            "min": -0.12993762993762342,
            "max": 0.49677419354838714,
            "size": 1396
          },
          "1": {
            "mean": -0.09138166735284615,
            "std": 0.07693602186516421,
            "min": -0.30541601079623926,
            "max": 0.002546471110501993,
            "size": 2284
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1320
          }
        },
        "computation_time": 46.051689,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 4,
        "selected_k": 3,
        "avg_similarity": 0.3893326671827869,
        "diversity_score": 0.6106673328172131,
        "silhouette_score": 0.3168438244210596,
        "niche_sizes": {
          "0": 2337,
          "1": 1316,
          "2": 1347
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08545196476780571,
            "std": 0.07617207085522877,
            "min": -0.31259121415454594,
            "max": 0.004091090268035422,
            "size": 2337
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1316
          },
          "2": {
            "mean": 0.34737963160182617,
            "std": 0.22347314877568406,
            "min": -0.11389071757734863,
            "max": 0.5453194650817237,
            "size": 1347
          }
        },
        "computation_time": 60.406026,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 5,
        "selected_k": 3,
        "avg_similarity": 0.3912750729260068,
        "diversity_score": 0.6087249270739932,
        "silhouette_score": 0.3333872526214206,
        "niche_sizes": {
          "0": 2285,
          "1": 1329,
          "2": 1386
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.07981739011557264,
            "std": 0.0765128080882965,
            "min": -0.3139903452717882,
            "max": 0.006167870159959969,
            "size": 2285
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1329
          },
          "2": {
            "mean": 0.3754105335650696,
            "std": 0.2454971740454821,
            "min": -0.09673913043477744,
            "max": 0.5797833935018051,
            "size": 1386
          }
        },
        "computation_time": 63.680841,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 6,
        "selected_k": 3,
        "avg_similarity": 0.39090874748975707,
        "diversity_score": 0.609091252510243,
        "silhouette_score": 0.34696947374965814,
        "niche_sizes": {
          "0": 2334,
          "1": 1348,
          "2": 1318
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08398056635900995,
            "std": 0.08315260684429393,
            "min": -0.3152797586645209,
            "max": 0.01049889216120377,
            "size": 2334
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1348
          },
          "2": {
            "mean": 0.44222914311852823,
            "std": 0.23170396303220986,
            "min": 0.05239179954441908,
            "max": 0.6218678815489749,
            "size": 1318
          }
        },
        "computation_time": 49.807843,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 7,
        "selected_k": 3,
        "avg_similarity": 0.3891953007069383,
        "diversity_score": 0.6108046992930617,
        "silhouette_score": 0.3571018529080154,
        "niche_sizes": {
          "0": 1360,
          "1": 2311,
          "2": 1329
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.4599023936285333,
            "std": 0.23905300177565178,
            "min": 0.04562178072111844,
            "max": 0.6387049300956587,
            "size": 1360
          },
          "1": {
            "mean": -0.07311033786011605,
            "std": 0.0820652668635587,
            "min": -0.32153703818958834,
            "max": 0.0407295150380061,
            "size": 2311
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1329
          }
        },
        "computation_time": 59.982369,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 8,
        "selected_k": 3,
        "avg_similarity": 0.38888864368433745,
        "diversity_score": 0.6111113563156625,
        "silhouette_score": 0.40612462240880604,
        "niche_sizes": {
          "0": 2758,
          "1": 1289,
          "2": 953
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.07664136619143212,
            "std": 0.10199371484980867,
            "min": -0.30907533020512046,
            "max": 0.07707269422902652,
            "size": 2758
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1289
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 953
          }
        },
        "computation_time": 83.065821,
        "k_selection_mode": "fixed"
      }
    ]
  }
}