{
  "config": {
    "tickers": [
      "ABX.TO",
      "BBD-B.TO",
      "RY.TO",
      "TRP.TO"
    ],
    "train_data_start": "1995-01-03",
    "train_backtest_start": "1997-06-25",
    "train_backtest_end": "1999-06-25",
    "test_data_start": "1997-06-25",
    "test_backtest_start": "1999-06-26",
    "test_backtest_end": "2001-06-26",
    "initial_capital": 100000.0,
    "population_size": 5000,
    "generations": 50,
    "crossover_prob": 0.8,
    "mutation_prob": 0.2,
    "tournament_size": 3,
    "fitness_metric": "sharpe_ratio",
    "risk_free_rate": 0.0,
    "early_stopping_enabled": true,
    "early_stopping_patience": 5,
    "early_stopping_min_delta": 0.001,
    "niching_enabled": true,
    "niching_n_clusters": 3,
    "niching_cross_ratio": 0.8,
    "niching_update_frequency": 1,
    "niching_algorithm": "kmeans",
    "output_dir": "portfolio_experiment_results",
    "experiment_name": "portfolio_exp_sharpe_20251020_144334"
  },
  "evolution_log": [
    {
      "generation": 1,
      "min_fitness": -1.7325605721550323,
      "avg_fitness": 0.08635927232203182,
      "max_fitness": 1.6160230122860204,
      "std_fitness": 0.19708247276877308,
      "eval_time": 115.50282,
      "timestamp": "2025-10-20T14:45:29.620567",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 2,
      "min_fitness": -1.734341199221138,
      "avg_fitness": 0.14781640236915555,
      "max_fitness": 1.6160230122860204,
      "std_fitness": 0.16985098140150656,
      "eval_time": 97.915678,
      "timestamp": "2025-10-20T14:47:54.430398",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 3,
      "min_fitness": -1.5163079625647282,
      "avg_fitness": 0.17285485084836089,
      "max_fitness": 1.3435013971080636,
      "std_fitness": 0.18353642085804467,
      "eval_time": 96.985552,
      "timestamp": "2025-10-20T14:50:16.845603",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 4,
      "min_fitness": -1.3391801481346732,
      "avg_fitness": 0.20300585417655384,
      "max_fitness": 1.9475735802394467,
      "std_fitness": 0.21040305640350662,
      "eval_time": 98.489272,
      "timestamp": "2025-10-20T14:52:41.148618",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 5,
      "min_fitness": -1.361740137409066,
      "avg_fitness": 0.23273675191200355,
      "max_fitness": 1.9475735802394467,
      "std_fitness": 0.24615286450248633,
      "eval_time": 97.724585,
      "timestamp": "2025-10-20T14:55:09.065484",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 6,
      "min_fitness": -1.2106518650923972,
      "avg_fitness": 0.25615848813623676,
      "max_fitness": 1.6160230122860204,
      "std_fitness": 0.27301008630940793,
      "eval_time": 98.389973,
      "timestamp": "2025-10-20T14:57:39.006462",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 7,
      "min_fitness": -1.2106518650923972,
      "avg_fitness": 0.2803012047242765,
      "max_fitness": 1.491017056997304,
      "std_fitness": 0.2959866935859627,
      "eval_time": 97.334391,
      "timestamp": "2025-10-20T15:00:08.493923",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 8,
      "min_fitness": -1.5401366411239026,
      "avg_fitness": 0.30329762172102176,
      "max_fitness": 1.491017056997304,
      "std_fitness": 0.33473469670377154,
      "eval_time": 98.446384,
      "timestamp": "2025-10-20T15:02:44.977423",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 9,
      "min_fitness": -1.3614838491873424,
      "avg_fitness": 0.3258848577745436,
      "max_fitness": 1.6006285008424026,
      "std_fitness": 0.3610598452877492,
      "eval_time": 98.760374,
      "timestamp": "2025-10-20T15:05:24.272621",
      "early_stopped": true,
      "early_stop_reason": "No improvement for 5 generations"
    }
  ],
  "total_time": 1310.46124,
  "actual_generations": 9,
  "final_statistics": {
    "best_fitness": 1.9475735802394467,
    "best_pnl": 194757.35802394466
  },
  "early_stopping": {
    "enabled": true,
    "triggered": true,
    "status": {
      "counter": 5,
      "best_fitness": 1.9475735802394467,
      "should_stop": true,
      "generation": 9,
      "patience": 5,
      "min_delta": 0.001,
      "mode": "max"
    }
  },
  "niching": {
    "enabled": true,
    "n_clusters": 3,
    "cross_ratio": 0.8,
    "update_frequency": 1,
    "algorithm": "kmeans",
    "log": [
      {
        "generation": 1,
        "selected_k": 3,
        "avg_similarity": 0.35000018403680744,
        "diversity_score": 0.6499998159631926,
        "silhouette_score": 0.10146087142390851,
        "niche_sizes": {
          "0": 416,
          "1": 1437,
          "2": 3147
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 416
          },
          "1": {
            "mean": 0.24998885406187057,
            "std": 0.01132621371985921,
            "min": 0.23467966573816157,
            "max": 0.26532033426183843,
            "size": 1437
          },
          "2": {
            "mean": -0.08513810809258514,
            "std": 0.07125392317470818,
            "min": -0.26515930113053504,
            "max": -0.002545822350457309,
            "size": 3147
          }
        },
        "computation_time": 43.803098,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 2,
        "selected_k": 3,
        "avg_similarity": 0.40041723709821314,
        "diversity_score": 0.5995827629017869,
        "silhouette_score": 0.2948270378335045,
        "niche_sizes": {
          "0": 1308,
          "1": 1333,
          "2": 2359
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.28815318129385636,
            "std": 0.11176324991048167,
            "min": 0.17903596021423107,
            "max": 0.4192807957153787,
            "size": 1308
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1333
          },
          "2": {
            "mean": -0.09994454089226004,
            "std": 0.07563040765529053,
            "min": -0.290853473411664,
            "max": 0.002472585726404414,
            "size": 2359
          }
        },
        "computation_time": 42.290066,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 3,
        "selected_k": 3,
        "avg_similarity": 0.3986938089753597,
        "diversity_score": 0.6013061910246402,
        "silhouette_score": 0.30913207615679567,
        "niche_sizes": {
          "0": 1418,
          "1": 2253,
          "2": 1329
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.3084076864364733,
            "std": 0.1881326110685748,
            "min": -0.1299631600491123,
            "max": 0.49188426252646433,
            "size": 1418
          },
          "1": {
            "mean": -0.09794128654369308,
            "std": 0.07781967578060883,
            "min": -0.3037363879889682,
            "max": 0.0015825439115896606,
            "size": 2253
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1329
          }
        },
        "computation_time": 43.109119,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 4,
        "selected_k": 3,
        "avg_similarity": 0.3925563962835853,
        "diversity_score": 0.6074436037164147,
        "silhouette_score": 0.31411157686606755,
        "niche_sizes": {
          "0": 2235,
          "1": 1329,
          "2": 1436
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.09249798654282947,
            "std": 0.07577493785484497,
            "min": -0.2937590088479579,
            "max": 6.902809052113459e-05,
            "size": 2235
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1329
          },
          "2": {
            "mean": 0.3121802815136225,
            "std": 0.19619630825486925,
            "min": -0.12464416429442171,
            "max": 0.4996515679442509,
            "size": 1436
          }
        },
        "computation_time": 47.081649,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 5,
        "selected_k": 3,
        "avg_similarity": 0.38264701732265627,
        "diversity_score": 0.6173529826773437,
        "silhouette_score": 0.3107997641191609,
        "niche_sizes": {
          "0": 2328,
          "1": 1300,
          "2": 1372
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08585818742267193,
            "std": 0.07655721402269762,
            "min": -0.31749332744873204,
            "max": 0.004806094650061302,
            "size": 2328
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1300
          },
          "2": {
            "mean": 0.330813907373021,
            "std": 0.22252216049951742,
            "min": -0.10470178493686876,
            "max": 0.5317286652078774,
            "size": 1372
          }
        },
        "computation_time": 48.533953,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 6,
        "selected_k": 3,
        "avg_similarity": 0.3858983135414972,
        "diversity_score": 0.6141016864585028,
        "silhouette_score": 0.32828667694882935,
        "niche_sizes": {
          "0": 1361,
          "1": 2259,
          "2": 1380
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1361
          },
          "1": {
            "mean": -0.08158216942482939,
            "std": 0.07636390816391285,
            "min": -0.32311829798896574,
            "max": 0.006400783207170719,
            "size": 2259
          },
          "2": {
            "mean": 0.33675906193828714,
            "std": 0.23751998404353974,
            "min": -0.09849640444540696,
            "max": 0.5467730239303843,
            "size": 1380
          }
        },
        "computation_time": 48.759997,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 7,
        "selected_k": 3,
        "avg_similarity": 0.38355955997193464,
        "diversity_score": 0.6164404400280654,
        "silhouette_score": 0.34636785640682893,
        "niche_sizes": {
          "0": 2261,
          "1": 1354,
          "2": 1385
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08036096819251735,
            "std": 0.07733069945834248,
            "min": -0.3268556148316778,
            "max": 0.010497829090280537,
            "size": 2261
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1354
          },
          "2": {
            "mean": 0.40399670116781694,
            "std": 0.27648431647336486,
            "min": -0.07630700778642525,
            "max": 0.6184971098265897,
            "size": 1385
          }
        },
        "computation_time": 55.330082,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 8,
        "selected_k": 3,
        "avg_similarity": 0.3743381581178044,
        "diversity_score": 0.6256618418821955,
        "silhouette_score": 0.3295627229053276,
        "niche_sizes": {
          "0": 1383,
          "1": 1320,
          "2": 2297
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.3709832496774246,
            "std": 0.2678088995419435,
            "min": -0.07351955307262086,
            "max": 0.5904486251808972,
            "size": 1383
          },
          "1": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1320
          },
          "2": {
            "mean": -0.08065137996397052,
            "std": 0.07389511185017913,
            "min": -0.3315053653617433,
            "max": 0.008556441020652606,
            "size": 2297
          }
        },
        "computation_time": 57.628106,
        "k_selection_mode": "fixed"
      }
    ]
  }
}