{
  "config": {
    "tickers": [
      "ABX.TO",
      "BBD-B.TO",
      "RY.TO",
      "TRP.TO"
    ],
    "train_data_start": "1995-01-03",
    "train_backtest_start": "1997-06-25",
    "train_backtest_end": "1999-06-25",
    "test_data_start": "1997-06-25",
    "test_backtest_start": "1999-06-26",
    "test_backtest_end": "2001-06-26",
    "initial_capital": 100000.0,
    "population_size": 5000,
    "generations": 50,
    "crossover_prob": 0.8,
    "mutation_prob": 0.2,
    "tournament_size": 3,
    "fitness_metric": "sharpe_ratio",
    "risk_free_rate": 0.0,
    "early_stopping_enabled": true,
    "early_stopping_patience": 5,
    "early_stopping_min_delta": 0.001,
    "niching_enabled": true,
    "niching_n_clusters": 3,
    "niching_cross_ratio": 0.8,
    "niching_update_frequency": 1,
    "niching_algorithm": "kmeans",
    "output_dir": "portfolio_experiment_results",
    "experiment_name": "portfolio_exp_sharpe_20251014_234417"
  },
  "evolution_log": [
    {
      "generation": 1,
      "min_fitness": -1.487239218359457,
      "avg_fitness": 0.08905815595484932,
      "max_fitness": 1.4990151814412178,
      "std_fitness": 0.18915509958779858,
      "eval_time": 117.614872,
      "timestamp": "2025-10-14T23:46:15.643501",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 2,
      "min_fitness": -1.4673214157362273,
      "avg_fitness": 0.14545795804347622,
      "max_fitness": 1.4990151814412178,
      "std_fitness": 0.167460382649176,
      "eval_time": 95.893243,
      "timestamp": "2025-10-14T23:48:44.487914",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 3,
      "min_fitness": -1.4801924823971881,
      "avg_fitness": 0.1823699347719697,
      "max_fitness": 1.65429904026722,
      "std_fitness": 0.1952719958914005,
      "eval_time": 95.087064,
      "timestamp": "2025-10-14T23:51:07.229756",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 4,
      "min_fitness": -1.2624374167670913,
      "avg_fitness": 0.20485225179261338,
      "max_fitness": 1.65429904026722,
      "std_fitness": 0.22954256946599366,
      "eval_time": 107.726566,
      "timestamp": "2025-10-14T23:53:47.222671",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 5,
      "min_fitness": -1.1926723974253999,
      "avg_fitness": 0.23730616484875544,
      "max_fitness": 1.65429904026722,
      "std_fitness": 0.26118925315998726,
      "eval_time": 103.371856,
      "timestamp": "2025-10-14T23:56:37.168792",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 6,
      "min_fitness": -0.8693817985134065,
      "avg_fitness": 0.2688463097065538,
      "max_fitness": 1.65429904026722,
      "std_fitness": 0.2929840378036338,
      "eval_time": 97.940556,
      "timestamp": "2025-10-14T23:59:10.976055",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 7,
      "min_fitness": -1.361740137409066,
      "avg_fitness": 0.29543654992647034,
      "max_fitness": 1.8156820021329598,
      "std_fitness": 0.33217156096313316,
      "eval_time": 98.430485,
      "timestamp": "2025-10-15T00:01:44.795154",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 8,
      "min_fitness": -1.366530719365885,
      "avg_fitness": 0.314891780051761,
      "max_fitness": 1.5694142153030382,
      "std_fitness": 0.3630259787375064,
      "eval_time": 98.938766,
      "timestamp": "2025-10-15T00:04:18.533142",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 9,
      "min_fitness": -1.3614838491873424,
      "avg_fitness": 0.3441849063198476,
      "max_fitness": 1.5694142153030382,
      "std_fitness": 0.392475067512189,
      "eval_time": 98.191492,
      "timestamp": "2025-10-15T00:06:53.631314",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 10,
      "min_fitness": -1.361740137409066,
      "avg_fitness": 0.3481977614343374,
      "max_fitness": 1.6350926826229661,
      "std_fitness": 0.41136899769277446,
      "eval_time": 98.930402,
      "timestamp": "2025-10-15T00:09:31.687539",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 11,
      "min_fitness": -1.6992988437714165,
      "avg_fitness": 0.37528782873087674,
      "max_fitness": 1.7209034681249233,
      "std_fitness": 0.44106724241141015,
      "eval_time": 96.312892,
      "timestamp": "2025-10-15T00:12:01.479803",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 12,
      "min_fitness": -1.361740137409066,
      "avg_fitness": 0.3905965792093303,
      "max_fitness": 2.0611404271479326,
      "std_fitness": 0.4659238124842815,
      "eval_time": 98.115267,
      "timestamp": "2025-10-15T00:14:33.508030",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 13,
      "min_fitness": -1.361740137409066,
      "avg_fitness": 0.4144936059289197,
      "max_fitness": 2.0611404271479326,
      "std_fitness": 0.4941817005220685,
      "eval_time": 97.400261,
      "timestamp": "2025-10-15T00:17:03.442392",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 14,
      "min_fitness": -1.2949744972161477,
      "avg_fitness": 0.42015622527604934,
      "max_fitness": 2.0611404271479326,
      "std_fitness": 0.5068997967273371,
      "eval_time": 96.825741,
      "timestamp": "2025-10-15T00:19:35.438436",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 15,
      "min_fitness": -1.3284718865053582,
      "avg_fitness": 0.4287111398142316,
      "max_fitness": 2.082280800467936,
      "std_fitness": 0.5260424618748392,
      "eval_time": 98.693253,
      "timestamp": "2025-10-15T00:22:11.246151",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 16,
      "min_fitness": -1.1350391673930722,
      "avg_fitness": 0.4359135174994062,
      "max_fitness": 2.0611404271479326,
      "std_fitness": 0.5455189169474709,
      "eval_time": 99.440874,
      "timestamp": "2025-10-15T00:24:47.916456",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 17,
      "min_fitness": -1.2636197336968829,
      "avg_fitness": 0.4489419603794762,
      "max_fitness": 2.2396232271022605,
      "std_fitness": 0.564088281936785,
      "eval_time": 96.327451,
      "timestamp": "2025-10-15T00:27:26.848036",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 18,
      "min_fitness": -1.3304102634032955,
      "avg_fitness": 0.4805543417083676,
      "max_fitness": 2.2396232271022605,
      "std_fitness": 0.587608896865479,
      "eval_time": 98.577483,
      "timestamp": "2025-10-15T00:30:09.585306",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 19,
      "min_fitness": -1.2106518650923972,
      "avg_fitness": 0.48441929166490927,
      "max_fitness": 2.2396232271022605,
      "std_fitness": 0.599616813540658,
      "eval_time": 110.051721,
      "timestamp": "2025-10-15T00:33:14.935080",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 20,
      "min_fitness": -1.1975210318615346,
      "avg_fitness": 0.5193171601738411,
      "max_fitness": 2.2746887648769256,
      "std_fitness": 0.6316249895992111,
      "eval_time": 106.717912,
      "timestamp": "2025-10-15T00:36:39.515545",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 21,
      "min_fitness": -1.5216912157123592,
      "avg_fitness": 0.5226016869192638,
      "max_fitness": 2.2746887648769256,
      "std_fitness": 0.6493654796232647,
      "eval_time": 104.768462,
      "timestamp": "2025-10-15T00:39:50.287812",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 22,
      "min_fitness": -1.361740137409066,
      "avg_fitness": 0.5486610416771662,
      "max_fitness": 2.2746887648769256,
      "std_fitness": 0.6743052907969411,
      "eval_time": 101.623444,
      "timestamp": "2025-10-15T00:42:41.381103",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 23,
      "min_fitness": -1.3248543491671172,
      "avg_fitness": 0.5526317643783238,
      "max_fitness": 2.2746887648769256,
      "std_fitness": 0.683562733573211,
      "eval_time": 102.502096,
      "timestamp": "2025-10-15T00:45:37.252385",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 24,
      "min_fitness": -1.113006343641698,
      "avg_fitness": 0.564211198824926,
      "max_fitness": 2.2746887648769256,
      "std_fitness": 0.7121984355517331,
      "eval_time": 103.65472,
      "timestamp": "2025-10-15T00:48:26.682291",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 25,
      "min_fitness": -1.496933134540112,
      "avg_fitness": 0.5686261503145875,
      "max_fitness": 2.2746887648769256,
      "std_fitness": 0.7277180752829268,
      "eval_time": 105.036218,
      "timestamp": "2025-10-15T00:51:21.235204",
      "early_stopped": true,
      "early_stop_reason": "No improvement for 5 generations"
    }
  ],
  "total_time": 4023.532472,
  "actual_generations": 25,
  "final_statistics": {
    "best_fitness": 2.2746887648769256,
    "best_pnl": 227468.87648769256
  },
  "early_stopping": {
    "enabled": true,
    "triggered": true,
    "status": {
      "counter": 5,
      "best_fitness": 2.2746887648769256,
      "should_stop": true,
      "generation": 25,
      "patience": 5,
      "min_delta": 0.001,
      "mode": "max"
    }
  },
  "niching": {
    "enabled": true,
    "n_clusters": 3,
    "cross_ratio": 0.8,
    "update_frequency": 1,
    "algorithm": "kmeans",
    "log": [
      {
        "generation": 1,
        "avg_similarity": 0.34778568113622715,
        "diversity_score": 0.6522143188637728,
        "silhouette_score": 0.09685669963741289,
        "niche_sizes": {
          "0": 396,
          "1": 3154,
          "2": 1450
        },
        "computation_time": 50.229154
      },
      {
        "generation": 2,
        "avg_similarity": 0.39990978367101937,
        "diversity_score": 0.6000902163289806,
        "silhouette_score": 0.29339050122717264,
        "niche_sizes": {
          "0": 2344,
          "1": 1311,
          "2": 1345
        },
        "computation_time": 45.037164
      },
      {
        "generation": 3,
        "avg_similarity": 0.39355563647217084,
        "diversity_score": 0.6064443635278292,
        "silhouette_score": 0.3031818771685207,
        "niche_sizes": {
          "0": 2284,
          "1": 1396,
          "2": 1320
        },
        "computation_time": 46.632427
      },
      {
        "generation": 4,
        "avg_similarity": 0.3827340310775,
        "diversity_score": 0.6172659689225,
        "silhouette_score": 0.29933001495177497,
        "niche_sizes": {
          "0": 2307,
          "1": 1242,
          "2": 1451
        },
        "computation_time": 63.372507
      },
      {
        "generation": 5,
        "avg_similarity": 0.3862725743643572,
        "diversity_score": 0.6137274256356429,
        "silhouette_score": 0.32537572842713086,
        "niche_sizes": {
          "0": 1391,
          "1": 2261,
          "2": 1348
        },
        "computation_time": 53.118073
      },
      {
        "generation": 6,
        "avg_similarity": 0.3846715516889591,
        "diversity_score": 0.6153284483110408,
        "silhouette_score": 0.3339916812100889,
        "niche_sizes": {
          "0": 2248,
          "1": 1366,
          "2": 1386
        },
        "computation_time": 52.281838
      },
      {
        "generation": 7,
        "avg_similarity": 0.38191610909794416,
        "diversity_score": 0.6180838909020558,
        "silhouette_score": 0.3305134234211536,
        "niche_sizes": {
          "0": 1329,
          "1": 2294,
          "2": 1377
        },
        "computation_time": 52.431784
      },
      {
        "generation": 8,
        "avg_similarity": 0.3818522247293281,
        "diversity_score": 0.6181477752706719,
        "silhouette_score": 0.32455784945634025,
        "niche_sizes": {
          "0": 1454,
          "1": 1296,
          "2": 2250
        },
        "computation_time": 54.090085
      },
      {
        "generation": 9,
        "avg_similarity": 0.3880354794335485,
        "diversity_score": 0.6119645205664515,
        "silhouette_score": 0.39309771900763085,
        "niche_sizes": {
          "0": 2781,
          "1": 1387,
          "2": 832
        },
        "computation_time": 56.558592
      },
      {
        "generation": 10,
        "avg_similarity": 0.4101880838534231,
        "diversity_score": 0.5898119161465769,
        "silhouette_score": 0.49098510763276865,
        "niche_sizes": {
          "0": 1352,
          "1": 2357,
          "2": 1291
        },
        "computation_time": 50.965502
      },
      {
        "generation": 11,
        "avg_similarity": 0.4170434554705368,
        "diversity_score": 0.5829565445294632,
        "silhouette_score": 0.5106075636514129,
        "niche_sizes": {
          "0": 1357,
          "1": 2288,
          "2": 1355
        },
        "computation_time": 50.747312
      },
      {
        "generation": 12,
        "avg_similarity": 0.42249385326216155,
        "diversity_score": 0.5775061467378384,
        "silhouette_score": 0.5238787630813182,
        "niche_sizes": {
          "0": 2241,
          "1": 1406,
          "2": 1353
        },
        "computation_time": 49.619697
      },
      {
        "generation": 13,
        "avg_similarity": 0.41167847137015434,
        "diversity_score": 0.5883215286298457,
        "silhouette_score": 0.5057637196498835,
        "niche_sizes": {
          "0": 2330,
          "1": 1353,
          "2": 1317
        },
        "computation_time": 52.909852
      },
      {
        "generation": 14,
        "avg_similarity": 0.40939528333439024,
        "diversity_score": 0.5906047166656098,
        "silhouette_score": 0.5007380252807466,
        "niche_sizes": {
          "0": 1348,
          "1": 2347,
          "2": 1305
        },
        "computation_time": 54.44151
      },
      {
        "generation": 15,
        "avg_similarity": 0.4129121288713288,
        "diversity_score": 0.5870878711286712,
        "silhouette_score": 0.505560865212944,
        "niche_sizes": {
          "0": 1296,
          "1": 2331,
          "2": 1373
        },
        "computation_time": 54.484421
      },
      {
        "generation": 16,
        "avg_similarity": 0.40587180764646674,
        "diversity_score": 0.5941281923535333,
        "silhouette_score": 0.49999834315951974,
        "niche_sizes": {
          "0": 1344,
          "1": 2349,
          "2": 1307
        },
        "computation_time": 60.084186
      },
      {
        "generation": 17,
        "avg_similarity": 0.4055620325368214,
        "diversity_score": 0.5944379674631786,
        "silhouette_score": 0.502658213067039,
        "niche_sizes": {
          "0": 2335,
          "1": 1358,
          "2": 1307
        },
        "computation_time": 61.685875
      },
      {
        "generation": 18,
        "avg_similarity": 0.40145428215912815,
        "diversity_score": 0.5985457178408718,
        "silhouette_score": 0.49299869483086584,
        "niche_sizes": {
          "0": 2375,
          "1": 1304,
          "2": 1321
        },
        "computation_time": 73.063349
      },
      {
        "generation": 19,
        "avg_similarity": 0.4027373729579978,
        "diversity_score": 0.5972626270420023,
        "silhouette_score": 0.49700988506576976,
        "niche_sizes": {
          "0": 1316,
          "1": 2347,
          "2": 1337
        },
        "computation_time": 93.518536
      },
      {
        "generation": 20,
        "avg_similarity": 0.4010224537892368,
        "diversity_score": 0.5989775462107632,
        "silhouette_score": 0.5013677812340068,
        "niche_sizes": {
          "0": 2352,
          "1": 1368,
          "2": 1280
        },
        "computation_time": 81.342648
      },
      {
        "generation": 21,
        "avg_similarity": 0.41171252537798,
        "diversity_score": 0.58828747462202,
        "silhouette_score": 0.5183433354504968,
        "niche_sizes": {
          "0": 2305,
          "1": 1358,
          "2": 1337
        },
        "computation_time": 66.308062
      },
      {
        "generation": 22,
        "avg_similarity": 0.4080661860919178,
        "diversity_score": 0.5919338139080822,
        "silhouette_score": 0.517022786431559,
        "niche_sizes": {
          "0": 1297,
          "1": 2348,
          "2": 1355
        },
        "computation_time": 68.567933
      },
      {
        "generation": 23,
        "avg_similarity": 0.42010267250008926,
        "diversity_score": 0.5798973274999107,
        "silhouette_score": 0.5411385542426409,
        "niche_sizes": {
          "0": 1363,
          "1": 2258,
          "2": 1379
        },
        "computation_time": 62.478593
      },
      {
        "generation": 24,
        "avg_similarity": 0.4187388350415113,
        "diversity_score": 0.5812611649584887,
        "silhouette_score": 0.545666802728937,
        "niche_sizes": {
          "0": 1383,
          "1": 2245,
          "2": 1372
        },
        "computation_time": 66.068997
      }
    ]
  }
}