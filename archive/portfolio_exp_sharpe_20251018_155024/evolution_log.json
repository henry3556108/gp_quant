{
  "config": {
    "tickers": [
      "ABX.TO",
      "BBD-B.TO",
      "RY.TO",
      "TRP.TO"
    ],
    "train_data_start": "1995-01-03",
    "train_backtest_start": "1997-06-25",
    "train_backtest_end": "1999-06-25",
    "test_data_start": "1997-06-25",
    "test_backtest_start": "1999-06-26",
    "test_backtest_end": "2001-06-26",
    "initial_capital": 100000.0,
    "population_size": 5000,
    "generations": 50,
    "crossover_prob": 0.8,
    "mutation_prob": 0.2,
    "tournament_size": 3,
    "fitness_metric": "sharpe_ratio",
    "risk_free_rate": 0.0,
    "early_stopping_enabled": true,
    "early_stopping_patience": 5,
    "early_stopping_min_delta": 0.001,
    "niching_enabled": true,
    "niching_n_clusters": 3,
    "niching_cross_ratio": 0.8,
    "niching_update_frequency": 1,
    "niching_algorithm": "kmeans",
    "output_dir": "portfolio_experiment_results",
    "experiment_name": "portfolio_exp_sharpe_20251018_155024"
  },
  "evolution_log": [
    {
      "generation": 1,
      "min_fitness": -1.7120321291126224,
      "avg_fitness": 0.08761102249313149,
      "max_fitness": 1.4526351103842086,
      "std_fitness": 0.1862811272570311,
      "eval_time": 153.079875,
      "timestamp": "2025-10-18T15:52:57.587478",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 2,
      "min_fitness": -1.621966989953945,
      "avg_fitness": 0.1468043684217594,
      "max_fitness": 1.8330440233552519,
      "std_fitness": 0.17445606881890796,
      "eval_time": 127.531582,
      "timestamp": "2025-10-18T15:56:03.359522",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 3,
      "min_fitness": -1.4673214157362273,
      "avg_fitness": 0.18239523105672184,
      "max_fitness": 1.8330440233552519,
      "std_fitness": 0.19011580456450958,
      "eval_time": 127.192774,
      "timestamp": "2025-10-18T15:59:05.660576",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 4,
      "min_fitness": -1.361740137409066,
      "avg_fitness": 0.21101638778973555,
      "max_fitness": 1.8330440233552519,
      "std_fitness": 0.22962638659921877,
      "eval_time": 135.648729,
      "timestamp": "2025-10-18T16:02:20.017958",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 5,
      "min_fitness": -1.2085716245916842,
      "avg_fitness": 0.23695156225775535,
      "max_fitness": 1.8330440233552519,
      "std_fitness": 0.26526329897718115,
      "eval_time": 136.419964,
      "timestamp": "2025-10-18T16:05:44.277053",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 6,
      "min_fitness": -1.4304557401508025,
      "avg_fitness": 0.2599656458556615,
      "max_fitness": 1.8330440233552519,
      "std_fitness": 0.29935989775080385,
      "eval_time": 155.193354,
      "timestamp": "2025-10-18T16:09:37.298104",
      "niching_selection": {
        "cross_niche_pairs": 2000,
        "within_niche_pairs": 500,
        "cross_niche_ratio": 0.8
      }
    },
    {
      "generation": 7,
      "min_fitness": -1.8087394511610424,
      "avg_fitness": 0.29174879411955235,
      "max_fitness": 1.8330440233552519,
      "std_fitness": 0.33464205138017933,
      "eval_time": 144.466601,
      "timestamp": "2025-10-18T16:13:29.769765",
      "early_stopped": true,
      "early_stop_reason": "No improvement for 5 generations"
    }
  ],
  "total_time": 1385.647196,
  "actual_generations": 7,
  "final_statistics": {
    "best_fitness": 1.8330440233552519,
    "best_pnl": 183304.4023355252
  },
  "early_stopping": {
    "enabled": true,
    "triggered": true,
    "status": {
      "counter": 5,
      "best_fitness": 1.8330440233552519,
      "should_stop": true,
      "generation": 7,
      "patience": 5,
      "min_delta": 0.001,
      "mode": "max"
    }
  },
  "niching": {
    "enabled": true,
    "n_clusters": 3,
    "cross_ratio": 0.8,
    "update_frequency": 1,
    "algorithm": "kmeans",
    "log": [
      {
        "generation": 1,
        "selected_k": 3,
        "avg_similarity": 0.35106043475361864,
        "diversity_score": 0.6489395652463814,
        "silhouette_score": 0.10285546034609465,
        "niche_sizes": {
          "0": 3140,
          "1": 1435,
          "2": 425
        },
        "per_niche_silhouette": {
          "0": {
            "mean": -0.08582432759429805,
            "std": 0.07145967930226928,
            "min": -0.26489414850435133,
            "max": -0.0004951464162694422,
            "size": 3140
          },
          "1": {
            "mean": 0.2500109340603269,
            "std": 0.011341634356946071,
            "min": 0.23082287308228733,
            "max": 0.26011157601115764,
            "size": 1435
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 425
          }
        },
        "computation_time": 55.656377,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 2,
        "selected_k": 3,
        "avg_similarity": 0.40134677706969984,
        "diversity_score": 0.5986532229303001,
        "silhouette_score": 0.2931287465318178,
        "niche_sizes": {
          "0": 1348,
          "1": 2324,
          "2": 1328
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1348
          },
          "1": {
            "mean": -0.09901164570913287,
            "std": 0.0759700398055645,
            "min": -0.28976275924322004,
            "max": 0.0029229444683891636,
            "size": 2324
          },
          "2": {
            "mean": 0.2618575280776459,
            "std": 0.060324565093940574,
            "min": 0.20045214770158248,
            "max": 0.34363225320271285,
            "size": 1328
          }
        },
        "computation_time": 52.375246,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 3,
        "selected_k": 3,
        "avg_similarity": 0.3926979166713574,
        "diversity_score": 0.6073020833286427,
        "silhouette_score": 0.2922976567687703,
        "niche_sizes": {
          "0": 1309,
          "1": 2281,
          "2": 1410
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1309
          },
          "1": {
            "mean": -0.09400228873950271,
            "std": 0.07543965159936075,
            "min": -0.30247549814073665,
            "max": 0.001452982693746621,
            "size": 2281
          },
          "2": {
            "mean": 0.2602180882685511,
            "std": 0.14756467180066402,
            "min": -0.15205616850550857,
            "max": 0.4187366926898509,
            "size": 1410
          }
        },
        "computation_time": 55.701962,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 4,
        "selected_k": 3,
        "avg_similarity": 0.38466389718058996,
        "diversity_score": 0.61533610281941,
        "silhouette_score": 0.3008864641455988,
        "niche_sizes": {
          "0": 1399,
          "1": 2314,
          "2": 1287
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.2935374990253502,
            "std": 0.19208105772772852,
            "min": -0.12951432129513563,
            "max": 0.48140200286123036,
            "size": 1399
          },
          "1": {
            "mean": -0.08350330181869974,
            "std": 0.07572877067155774,
            "min": -0.31366294411509726,
            "max": 0.0061960476529255735,
            "size": 2314
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1287
          }
        },
        "computation_time": 64.761234,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 5,
        "selected_k": 3,
        "avg_similarity": 0.3856828506307322,
        "diversity_score": 0.6143171493692678,
        "silhouette_score": 0.3081455625390258,
        "niche_sizes": {
          "0": 1320,
          "1": 2296,
          "2": 1384
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1320
          },
          "1": {
            "mean": -0.07978252981705981,
            "std": 0.07581254103849354,
            "min": -0.3168931287485306,
            "max": 0.008402656791109832,
            "size": 2296
          },
          "2": {
            "mean": 0.29184140256871255,
            "std": 0.21082151565999244,
            "min": -0.11910828025477067,
            "max": 0.4953000723065799,
            "size": 1384
          }
        },
        "computation_time": 74.872621,
        "k_selection_mode": "fixed"
      },
      {
        "generation": 6,
        "selected_k": 3,
        "avg_similarity": 0.386333144623154,
        "diversity_score": 0.6136668553768461,
        "silhouette_score": 0.32269404919821165,
        "niche_sizes": {
          "0": 1361,
          "1": 2274,
          "2": 1365
        },
        "per_niche_silhouette": {
          "0": {
            "mean": 0.31047541903114034,
            "std": 0.2247129118673235,
            "min": -0.10839160839160417,
            "max": 0.5198529411764705,
            "size": 1361
          },
          "1": {
            "mean": -0.07655532071694093,
            "std": 0.07428902661600412,
            "min": -0.3215123084544077,
            "max": 0.008588447081354538,
            "size": 2274
          },
          "2": {
            "mean": 1.0,
            "std": 0.0,
            "min": 1.0,
            "max": 1.0,
            "size": 1365
          }
        },
        "computation_time": 84.272269,
        "k_selection_mode": "fixed"
      }
    ]
  }
}